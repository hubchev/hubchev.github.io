<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 How to work with R scripts | How to Use R for Data Science</title>
  <meta name="description" content="3 How to work with R scripts | How to Use R for Data Science" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="3 How to work with R scripts | How to Use R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 How to work with R scripts | How to Use R for Data Science" />
  
  
  

<meta name="author" content="© Prof. Dr. Stephan Huber (Stephan.Huber@hs-fresenius.de)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sec:swirl.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="preamble.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Managerial Economics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#sec:whyR"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#howtolearnr"><i class="fa fa-check"></i><b>1.2</b> How to learn R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#Rlearninglit"><i class="fa fa-check"></i><b>1.3</b> Learning resources</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>1.4</b> What are R and RStudio?</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#how-to-use-r-and-rstudio-without-installation"><i class="fa fa-check"></i><b>1.5</b> How to use R and RStudio without installation</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#installing"><i class="fa fa-check"></i><b>1.6</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#packages"><i class="fa fa-check"></i><b>1.7</b> What are R packages?</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="getting-started.html"><a href="getting-started.html#package-installation"><i class="fa fa-check"></i><b>1.7.1</b> Package installation</a></li>
<li class="chapter" data-level="1.7.2" data-path="getting-started.html"><a href="getting-started.html#package-loading"><i class="fa fa-check"></i><b>1.7.2</b> Package loading</a></li>
<li class="chapter" data-level="1.7.3" data-path="getting-started.html"><a href="getting-started.html#package-use"><i class="fa fa-check"></i><b>1.7.3</b> Package use</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sec:swirl.html"><a href="sec:swirl.html"><i class="fa fa-check"></i><b>2</b> Learn interactively with <em>swirl</em></a></li>
<li class="chapter" data-level="3" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html"><i class="fa fa-check"></i><b>3</b> How to work with R scripts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#r-scripts-why-they-are-useful"><i class="fa fa-check"></i><b>3.1</b> R Scripts: Why they are useful</a></li>
<li class="chapter" data-level="3.2" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#generate-write-and-run-r-scripts"><i class="fa fa-check"></i><b>3.2</b> Generate, write and run R scripts</a></li>
<li class="chapter" data-level="3.3" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#sec:assignmentoper"><i class="fa fa-check"></i><b>3.3</b> The assignment operator: <code>&lt;-</code></a></li>
<li class="chapter" data-level="3.4" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#doing-calculation-in-scripts"><i class="fa fa-check"></i><b>3.4</b> Doing calculation in scripts</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#sec:generics"><i class="fa fa-check"></i><b>3.4.1</b> User-defined functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>4</b> Appendix</a>
<ul>
<li class="chapter" data-level="4.1" data-path="appendix.html"><a href="appendix.html#sec:navigation"><i class="fa fa-check"></i><b>4.1</b> Navigating the file system</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="appendix.html"><a href="appendix.html#sec:filesystem"><i class="fa fa-check"></i><b>4.1.1</b> The file system</a></li>
<li class="chapter" data-level="4.1.2" data-path="appendix.html"><a href="appendix.html#working-directory"><i class="fa fa-check"></i><b>4.1.2</b> Working directory</a></li>
<li class="chapter" data-level="4.1.3" data-path="appendix.html"><a href="appendix.html#sec:navigationR"><i class="fa fa-check"></i><b>4.1.3</b> Navigating the file system using the R console</a></li>
<li class="chapter" data-level="4.1.4" data-path="appendix.html"><a href="appendix.html#sec:winbackslash"><i class="fa fa-check"></i><b>4.1.4</b> Why do the Windows paths use the back-slash?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li>&copy; Prof. Dr. Stephan Huber.</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">How to Use R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="how-to-work-with-r-scripts" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> How to work with R scripts<a href="how-to-work-with-r-scripts.html#how-to-work-with-r-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="r-scripts-why-they-are-useful" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> R Scripts: Why they are useful<a href="how-to-work-with-r-scripts.html#r-scripts-why-they-are-useful" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Typing functions into the console to run code may seem simple, but this interactive style has limitations:</p>
<ul>
<li>Typing commands one at a time can be cumbersome and time-consuming.</li>
<li>It’s hard to save your work effectively.</li>
<li>Going back to the beginning when you make a mistake is annoying.</li>
<li>You can’t leave notes for yourself.</li>
<li>Reusing and adapting analyses can be difficult.</li>
<li>It’s hard to do anything except the basics.</li>
<li>Sharing your work with others can be challenging.</li>
</ul>
<p>That’s where having a transcript of all the code, which can be re-run and edited at any time, becomes useful. An R script is precisely that - a plain text file that contains code and comments and this comes with advantages:</p>
<ul>
<li>Scripts provide a record of everything you did during your data analysis.</li>
<li>You can easily edit and re-run code in a script.</li>
<li>Scripts allow you to leave notes for yourself.</li>
<li>Scripts make it easy to reuse and adapt analyses.</li>
<li>Scripts allow you to do more complex analyses.</li>
<li>Scripts make it easy to share your work with others.</li>
</ul>
</div>
<div id="generate-write-and-run-r-scripts" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Generate, write and run R scripts<a href="how-to-work-with-r-scripts.html#generate-write-and-run-r-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To <strong>generate a script</strong> you can</p>
<ol style="list-style-type: decimal">
<li>Go to the <em>File</em> menu, select <em>New File</em> and then choose <em>R Script</em> or</li>
<li>Use the keyboard shortcut <em>Ctrl+Shift+N</em> (Windows) or <em>Cmd+Shift+N</em> (Mac) or</li>
<li>Type the following command in the Console:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="how-to-work-with-r-scripts.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.create</span>(<span class="st">&quot;hello.R&quot;</span>)</span></code></pre></div>
<p>In the first two ways, a new R script window will open which can be edited and should be saved either by clicking on the <em>File</em> menu and selecting <em>Save</em>, clicking the disk icon, or by using the shortcut <em>Ctrl+S</em> (Windows) or <em>Cmd+S</em> (Mac).
If you go for the third way, you need to open it manually.</p>
<p>Regardless of your preferred way of generating a script, we can now start <strong>writing</strong> our first script:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="how-to-work-with-r-scripts.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/sthu/Documents/scr/&quot;</span>)</span>
<span id="cb9-2"><a href="how-to-work-with-r-scripts.html#cb9-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;hello world&quot;</span></span>
<span id="cb9-3"><a href="how-to-work-with-r-scripts.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>Then save the script using the menus (File &gt; Save) as hello.R.</p>
<p>The above lines of code do the following:</p>
<ul>
<li><code>setwd()</code> allows to set the working directory. If you are not familiar with file systems, please read section @ref(#sec:navigation) in the appendix.</li>
<li>With the assignment operator <code>&lt;-</code> we create an object that stores the words “hello world” in an object entitled <code>x</code>. In the next section <a href="how-to-work-with-r-scripts.html#sec:assignmentoper">3.3</a> the assignment operator is further explained.</li>
<li>With the third input we print the content of the object <code>x</code>.</li>
</ul>
<p>So how do we <strong>run the script</strong>? Assuming that the <code>hello.R</code> file has been saved to your working directory, then you can run the script using the following command:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="how-to-work-with-r-scripts.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>( <span class="st">&quot;hello.R&quot;</span> )</span></code></pre></div>
<p>Suppose you saved the script in a sub-folder called of your working directory, then you need to run the script using the following command:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="how-to-work-with-r-scripts.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;./scripts/hello.R&quot;</span>) </span></code></pre></div>
<p>Just note that <code>.' means the current folder.  Instead of using the</code>source<code>function, you can click on the</code>source` button in Rstudio.</p>
<p>With the character <code>#</code> you can write a comment in a script and R will simply ignore everything that follows in that line onwards.</p>
</div>
<div id="sec:assignmentoper" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> The assignment operator: <code>&lt;-</code><a href="how-to-work-with-r-scripts.html#sec:assignmentoper" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Suppose I’m trying to calculate how much money I’m going to make from this book. I agree, it is an unrealistic example but it will help you to understand R.
Let’s assume I’m only going to sell 350 copies. To create a variable called <code>sales</code> that assign a \keyterm{value<code>to my variable</code>sales<code>, we need to use the _assignment operator_ of R, which is</code>&lt;-` as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="how-to-work-with-r-scripts.html#cb13-1" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="dv">350</span></span></code></pre></div>
<p>When you hit enter, R doesn’t print out any output. If you are using Rstudio, and the <em>environment panel</em> you can see that something happened there, can you? It just gives you another command prompt. However, behind the scenes R has created a variable called <code>sales</code> and given it a value of <code>350</code>. You can check that this has happened by asking R to print the variable on screen. And the simplest way to do that is to type the name of the variable and hit enter.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="how-to-work-with-r-scripts.html#cb14-1" aria-hidden="true" tabindex="-1"></a>sales</span></code></pre></div>
<pre><code>## [1] 350</code></pre>
<p>Worth a mentioning is the curious features of R that there are several different ways of making assignments. In addition to the <code>&lt;-</code> operator, we can also use <code>-&gt;</code> and <code>=</code>. If you want to use <code>-&gt;</code>, you might expect from just looking at the symbol you should write it like this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="how-to-work-with-r-scripts.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dv">350</span> <span class="ot">-&gt;</span> sales</span></code></pre></div>
<p>However, it is common practice to use <code>&lt;-</code> and I recommend only to use this one because it is easier to read in scripts.</p>
</div>
<div id="doing-calculation-in-scripts" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Doing calculation in scripts<a href="how-to-work-with-r-scripts.html#doing-calculation-in-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R can do any kind of arithmetic calculation with the arithmetic operators given in the table below. Using the assignment operator, R functions, and the features of a R script is easy and gives an idea how R works and how you should embrace the power of the programming language.</p>
<table>
<thead>
<tr class="header">
<th align="left">operation</th>
<th align="center">operator</th>
<th align="center">example input</th>
<th align="center">example output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">addition</td>
<td align="center">+</td>
<td align="center">10+2</td>
<td align="center">12</td>
</tr>
<tr class="even">
<td align="left">subtraction</td>
<td align="center">-</td>
<td align="center">9-3</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="left">multiplication</td>
<td align="center">*</td>
<td align="center">5*5</td>
<td align="center">25</td>
</tr>
<tr class="even">
<td align="left">division</td>
<td align="center">/</td>
<td align="center">10/3</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="left">power</td>
<td align="center">-</td>
<td align="center">5-2</td>
<td align="center">25</td>
</tr>
</tbody>
</table>
<p>So please copy and past the following script, try to run it on your PC, and try to understand it. Of course, you have to tweak the script a bit to make it run on your PC. For example, I doubt you have the same working directory that I decided to use.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="how-to-work-with-r-scripts.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb17-2"><a href="how-to-work-with-r-scripts.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~/Dropbox/hsf/23-ss/ds&quot;</span>)</span>
<span id="cb17-3"><a href="how-to-work-with-r-scripts.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector that contains the sales data</span></span>
<span id="cb17-4"><a href="how-to-work-with-r-scripts.html#cb17-4" aria-hidden="true" tabindex="-1"></a>sales_by_month <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">50</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb17-5"><a href="how-to-work-with-r-scripts.html#cb17-5" aria-hidden="true" tabindex="-1"></a>sales_by_month</span></code></pre></div>
<pre><code>##  [1]   0 100 200  50   3   4   8   0   0   0   0   0</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="how-to-work-with-r-scripts.html#cb19-1" aria-hidden="true" tabindex="-1"></a>sales_by_month[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="how-to-work-with-r-scripts.html#cb21-1" aria-hidden="true" tabindex="-1"></a>sales_by_month[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 50</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="how-to-work-with-r-scripts.html#cb23-1" aria-hidden="true" tabindex="-1"></a>february_sales <span class="ot">&lt;-</span> sales_by_month[<span class="dv">2</span>]</span>
<span id="cb23-2"><a href="how-to-work-with-r-scripts.html#cb23-2" aria-hidden="true" tabindex="-1"></a>february_sales</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="how-to-work-with-r-scripts.html#cb25-1" aria-hidden="true" tabindex="-1"></a>sales_by_month[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="dv">25</span> <span class="co"># added May sales data</span></span>
<span id="cb25-2"><a href="how-to-work-with-r-scripts.html#cb25-2" aria-hidden="true" tabindex="-1"></a>sales_by_month</span></code></pre></div>
<pre><code>##  [1]   0 100 200  50  25   4   8   0   0   0   0   0</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="how-to-work-with-r-scripts.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Do I have 12 month?</span></span>
<span id="cb27-2"><a href="how-to-work-with-r-scripts.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>( <span class="at">x =</span> sales_by_month )</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="how-to-work-with-r-scripts.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume each unit costs 7 Euro, then the revenue is</span></span>
<span id="cb29-2"><a href="how-to-work-with-r-scripts.html#cb29-2" aria-hidden="true" tabindex="-1"></a>price <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb29-3"><a href="how-to-work-with-r-scripts.html#cb29-3" aria-hidden="true" tabindex="-1"></a>revenue <span class="ot">&lt;-</span> sales_by_month<span class="sc">*</span>price</span>
<span id="cb29-4"><a href="how-to-work-with-r-scripts.html#cb29-4" aria-hidden="true" tabindex="-1"></a>revenue</span></code></pre></div>
<pre><code>##  [1]    0  700 1400  350  175   28   56    0    0    0    0    0</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="how-to-work-with-r-scripts.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To get statistics for daily revenue we define the number of days:</span></span>
<span id="cb31-2"><a href="how-to-work-with-r-scripts.html#cb31-2" aria-hidden="true" tabindex="-1"></a>days_per_month <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">31</span>, <span class="dv">28</span>, <span class="dv">31</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">31</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">30</span>, <span class="dv">31</span>)</span>
<span id="cb31-3"><a href="how-to-work-with-r-scripts.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the daily revenue</span></span>
<span id="cb31-4"><a href="how-to-work-with-r-scripts.html#cb31-4" aria-hidden="true" tabindex="-1"></a>revenue_per_day <span class="ot">&lt;-</span> revenue<span class="sc">/</span>days_per_month</span>
<span id="cb31-5"><a href="how-to-work-with-r-scripts.html#cb31-5" aria-hidden="true" tabindex="-1"></a>revenue_per_day </span></code></pre></div>
<pre><code>##  [1]  0.0000000 25.0000000 45.1612903 11.6666667  5.6451613  0.9333333  1.8064516  0.0000000  0.0000000  0.0000000  0.0000000
## [12]  0.0000000</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="how-to-work-with-r-scripts.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># round number </span></span>
<span id="cb33-2"><a href="how-to-work-with-r-scripts.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(revenue_per_day) </span></code></pre></div>
<pre><code>##  [1]  0 25 45 12  6  1  2  0  0  0  0  0</code></pre>
<p>Use the “<code>?</code>” to search for the documentation of all functions used. In particular, do you understand how the function <code>round()</code> works? What arguments does the function contain? How can you manipulate the pre-defined arguments. For example, can you calculate the rounded revenue per day with two or four digits? Try it out!</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="how-to-work-with-r-scripts.html#cb35-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">round</span>()</span></code></pre></div>
<div id="sec:generics" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> User-defined functions<a href="how-to-work-with-r-scripts.html#sec:generics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the great strengths of R is the user’s ability to add functions. Sometimes there is a small task (or series of tasks) you need done and you find yourself having to repeat it multiple times. In these types of situations it can be helpful to create your own custom function. The structure of a function is given below:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="how-to-work-with-r-scripts.html#cb36-1" aria-hidden="true" tabindex="-1"></a>name_of_function <span class="ot">&lt;-</span> <span class="cf">function</span>(argument1, argument2) {</span>
<span id="cb36-2"><a href="how-to-work-with-r-scripts.html#cb36-2" aria-hidden="true" tabindex="-1"></a>    statements or code that does something</span>
<span id="cb36-3"><a href="how-to-work-with-r-scripts.html#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(something)</span>
<span id="cb36-4"><a href="how-to-work-with-r-scripts.html#cb36-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>First you give your function a name.
Then you assign value to it, where the value is the function.
When defining the function you will want to provide the list of arguments required (inputs and/or options to modify behavior of the function), and wrapped between curly brackets place the tasks that are being executed on/using those arguments. The argument(s) can be any type of object (like a scalar, a matrix, a dataframe, a vector, a logical, etc), and it’s not necessary to define what it is in any way.
Finally, you can return the value of the object from the function, meaning pass the value of it into the global environment. The important idea behind functions is that objects that are created within the function are local to the environment of the function – they don’t exist outside of the function. Note, a function doesn’t require any arguments.</p>
<p>Let’s try creating a simple example function. This function will take in a numeric value as input, and return the squared value.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="how-to-work-with-r-scripts.html#cb37-1" aria-hidden="true" tabindex="-1"></a>square_it <span class="ot">&lt;-</span> <span class="cf">function</span>(x) { </span>
<span id="cb37-2"><a href="how-to-work-with-r-scripts.html#cb37-2" aria-hidden="true" tabindex="-1"></a>   square <span class="ot">&lt;-</span> x <span class="sc">*</span> x</span>
<span id="cb37-3"><a href="how-to-work-with-r-scripts.html#cb37-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">return</span>(square)</span>
<span id="cb37-4"><a href="how-to-work-with-r-scripts.html#cb37-4" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>Now, we can use the function as we would any other function. We type out the name of the function, and inside the parentheses we provide a numeric value <code>x</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="how-to-work-with-r-scripts.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">square_it</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<p>Let us get back to script with sales and try to calculate the monthly growth rates of revenue using a self-written function.</p>
<p>The formula of a growth rate is clear:</p>
<p><span class="math display">\[g=\left(\frac{y_t-y_{t-1}}{y_{t-1}}\cdot 100\right)=\left(\frac{y_t}{y_{t-1}}-1\right)\cdot 100\]</span>
So the challenge is to divide the value of <code>revenue</code> with the value of the previous period, a.k.a. the lagged value. Let us assume that the function <code>lag()</code> can give you exactly that value of a vector. Lets try it out:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="how-to-work-with-r-scripts.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(revenue)</span></code></pre></div>
<pre><code>##  [1]    0  700 1400  350  175   28   56    0    0    0    0    0
## attr(,&quot;tsp&quot;)
## [1]  0 11  1</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="how-to-work-with-r-scripts.html#cb42-1" aria-hidden="true" tabindex="-1"></a>(revenue<span class="sc">/</span><span class="fu">lag</span>(revenue)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span> </span></code></pre></div>
<pre><code>##  [1] NaN   0   0   0   0   0   0 NaN NaN NaN NaN NaN
## attr(,&quot;tsp&quot;)
## [1]  0 11  1</code></pre>
<p>Unfortunately, this does not work out. The <code>lag()</code> function does not work as we think it should. Well, the reason is simply that we are using the wrong function. The current <code>lag()</code> function is part of the stats package which is part of R base and is always loaded. The <code>lag()</code> function we aim to use stems from the dplyr package which we must install and load to be able to use it. So let’s do it:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="how-to-work-with-r-scripts.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check if the package is installed</span></span>
<span id="cb44-2"><a href="how-to-work-with-r-scripts.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">find.package</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;/home/sthu/R/x86_64-pc-linux-gnu-library/4.1/dplyr&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="how-to-work-with-r-scripts.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I already installed the package so I can just load it</span></span>
<span id="cb46-2"><a href="how-to-work-with-r-scripts.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;dplyr&quot;)</span></span>
<span id="cb46-3"><a href="how-to-work-with-r-scripts.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Now, we was informed that among other functions the <code>lag()</code> function is <em>masked</em>. That means that now the function of the newly loaded package is active. So, let’s try again:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="how-to-work-with-r-scripts.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(revenue)</span></code></pre></div>
<pre><code>##  [1]   NA    0  700 1400  350  175   28   56    0    0    0    0</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="how-to-work-with-r-scripts.html#cb52-1" aria-hidden="true" tabindex="-1"></a>(revenue<span class="sc">/</span><span class="fu">lag</span>(revenue)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span> </span></code></pre></div>
<pre><code>##  [1]   NA  Inf  100  -75  -50  -84  100 -100  NaN  NaN  NaN  NaN</code></pre>
<p>That looks good now. And here is a way to calculate growth rates with a self-written function:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="how-to-work-with-r-scripts.html#cb54-1" aria-hidden="true" tabindex="-1"></a>growth_rate <span class="ot">&lt;-</span> <span class="cf">function</span>(x)(x<span class="sc">/</span><span class="fu">lag</span>(x)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span> </span>
<span id="cb54-2"><a href="how-to-work-with-r-scripts.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">growth_rate</span>(revenue)</span></code></pre></div>
<pre><code>##  [1]   NA  Inf  100  -75  -50  -84  100 -100  NaN  NaN  NaN  NaN</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="how-to-work-with-r-scripts.html#cb56-1" aria-hidden="true" tabindex="-1"></a>sales_gr_rate <span class="ot">&lt;-</span> <span class="fu">growth_rate</span>(revenue)</span>
<span id="cb56-2"><a href="how-to-work-with-r-scripts.html#cb56-2" aria-hidden="true" tabindex="-1"></a>sales_gr_rate</span></code></pre></div>
<pre><code>##  [1]   NA  Inf  100  -75  -50  -84  100 -100  NaN  NaN  NaN  NaN</code></pre>
<p>You know, all functions in R are user-written and sometimes it happens that two people had the idea to name functions identically. In such a case we have to deal with that conflict as we cannot use both functions at the same time. Also, it is a very realistic case that you find a solution somewhere that should work out your problem but you fail to make it run. In such a case it is often a forgotten package that needs to be loaded.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sec:swirl.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
