<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Manage data |  How to Use R for Data Science</title>
  <meta name="description" content="<br />
How to Use R for Data Science</p>" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Manage data |  How to Use R for Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://hubchev.github.io/ds/fig/cover.png" />
  
  <meta name="github-repo" content="hubchev/hubchev.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Manage data |  How to Use R for Data Science" />
  
  
  <meta name="twitter:image" content="https://hubchev.github.io/ds/fig/cover.png" />

<meta name="author" content="© Prof. Dr. Stephan Huber (Stephan.Huber@hs-fresenius.de)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-data.html"/>
<link rel="next" href="collection-of-exercises.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="preamble.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="fig/cover.png"></a></li>
 <li><a href="./">How to Use R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#sec:whyR"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#howtolearnr"><i class="fa fa-check"></i><b>1.2</b> How to learn R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#Rlearninglit"><i class="fa fa-check"></i><b>1.3</b> Learning resources</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>1.4</b> What are R and RStudio?</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#how-to-use-r-and-rstudio-without-installation"><i class="fa fa-check"></i><b>1.5</b> How to use R and RStudio without installation</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#installing"><i class="fa fa-check"></i><b>1.6</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#packages"><i class="fa fa-check"></i><b>1.7</b> What are R packages?</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="getting-started.html"><a href="getting-started.html#package-installation"><i class="fa fa-check"></i><b>1.7.1</b> Package installation</a></li>
<li class="chapter" data-level="1.7.2" data-path="getting-started.html"><a href="getting-started.html#package-loading"><i class="fa fa-check"></i><b>1.7.2</b> Package loading</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="getting-started.html"><a href="getting-started.html#what-is-a-function-in-r"><i class="fa fa-check"></i><b>1.8</b> What is a function in R?</a></li>
<li class="chapter" data-level="1.9" data-path="getting-started.html"><a href="getting-started.html#sec:objects"><i class="fa fa-check"></i><b>1.9</b> What are objects in R?</a></li>
<li class="chapter" data-level="1.10" data-path="getting-started.html"><a href="getting-started.html#are-there-some-guidelines-for-working-with-r"><i class="fa fa-check"></i><b>1.10</b> Are there some guidelines for working with R?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="swirl.html"><a href="swirl.html"><i class="fa fa-check"></i><b>2</b> Learn interactively with swirl</a></li>
<li class="chapter" data-level="3" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html"><i class="fa fa-check"></i><b>3</b> Work with R scripts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html#r-scripts-why-they-are-useful"><i class="fa fa-check"></i><b>3.1</b> R Scripts: Why they are useful</a></li>
<li class="chapter" data-level="3.2" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html#generate-write-and-run-r-scripts"><i class="fa fa-check"></i><b>3.2</b> Generate, write, and run R scripts</a></li>
<li class="chapter" data-level="3.3" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html#sec:assignmentoper"><i class="fa fa-check"></i><b>3.3</b> The assignment operator: <code>&lt;-</code></a></li>
<li class="chapter" data-level="3.4" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html#doing-calculation-in-scripts"><i class="fa fa-check"></i><b>3.4</b> Doing calculation in scripts</a></li>
<li class="chapter" data-level="3.5" data-path="work-with-r-scripts.html"><a href="work-with-r-scripts.html#sec:generics"><i class="fa fa-check"></i><b>3.5</b> User-defined functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualizing-data.html"><a href="visualizing-data.html"><i class="fa fa-check"></i><b>4</b> Visualizing data</a></li>
<li class="chapter" data-level="5" data-path="manage-data.html"><a href="manage-data.html"><i class="fa fa-check"></i><b>5</b> Manage data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="manage-data.html"><a href="manage-data.html#the-tidyverse-universe"><i class="fa fa-check"></i><b>5.1</b> The tidyverse universe</a></li>
<li class="chapter" data-level="5.2" data-path="manage-data.html"><a href="manage-data.html#pipeoperator"><i class="fa fa-check"></i><b>5.2</b> The pipe operator</a></li>
<li class="chapter" data-level="5.3" data-path="manage-data.html"><a href="manage-data.html#import-data"><i class="fa fa-check"></i><b>5.3</b> Import data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="manage-data.html"><a href="manage-data.html#vectors-and-matrices"><i class="fa fa-check"></i><b>5.3.1</b> Vectors and matrices</a></li>
<li class="chapter" data-level="5.3.2" data-path="manage-data.html"><a href="manage-data.html#open-rdata-files"><i class="fa fa-check"></i><b>5.3.2</b> Open RData files</a></li>
<li class="chapter" data-level="5.3.3" data-path="manage-data.html"><a href="manage-data.html#open-datasets-of-packages"><i class="fa fa-check"></i><b>5.3.3</b> Open datasets of packages</a></li>
<li class="chapter" data-level="5.3.4" data-path="manage-data.html"><a href="manage-data.html#import-data-using-public-apis"><i class="fa fa-check"></i><b>5.3.4</b> Import data using public APIs</a></li>
<li class="chapter" data-level="5.3.5" data-path="manage-data.html"><a href="manage-data.html#import-various-file-formats"><i class="fa fa-check"></i><b>5.3.5</b> Import various file formats</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="manage-data.html"><a href="manage-data.html#sec:tidy"><i class="fa fa-check"></i><b>5.4</b> Data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="manage-data.html"><a href="manage-data.html#data-frames-and-tibbles"><i class="fa fa-check"></i><b>5.4.1</b> Data frames and tibbles</a></li>
<li class="chapter" data-level="5.4.2" data-path="manage-data.html"><a href="manage-data.html#tidy-data"><i class="fa fa-check"></i><b>5.4.2</b> Tidy data</a></li>
<li class="chapter" data-level="5.4.3" data-path="manage-data.html"><a href="manage-data.html#data-types"><i class="fa fa-check"></i><b>5.4.3</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="manage-data.html"><a href="manage-data.html#tools-to-manipulate-data"><i class="fa fa-check"></i><b>5.5</b> Tools to manipulate data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="manage-data.html"><a href="manage-data.html#the-in-operator"><i class="fa fa-check"></i><b>5.5.1</b> The <code>%in%</code> operator</a></li>
<li class="chapter" data-level="5.5.2" data-path="manage-data.html"><a href="manage-data.html#extract-operators"><i class="fa fa-check"></i><b>5.5.2</b> Extract operators</a></li>
<li class="chapter" data-level="5.5.3" data-path="manage-data.html"><a href="manage-data.html#logical-operators"><i class="fa fa-check"></i><b>5.5.3</b> Logical operators</a></li>
<li class="chapter" data-level="5.5.4" data-path="manage-data.html"><a href="manage-data.html#if-statements"><i class="fa fa-check"></i><b>5.5.4</b> If statements</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="manage-data.html"><a href="manage-data.html#ch:dplyr"><i class="fa fa-check"></i><b>5.6</b> Data manipulation with <code>dplyr</code></a></li>
<li class="chapter" data-level="5.7" data-path="manage-data.html"><a href="manage-data.html#how-to-explore-a-dataset"><i class="fa fa-check"></i><b>5.7</b> How to explore a dataset</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="collection-of-exercises.html"><a href="collection-of-exercises.html"><i class="fa fa-check"></i><b>6</b> Collection of exercises</a></li>
<li class="chapter" data-level="8" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>8</b> Appendix</a>
<ul>
<li class="chapter" data-level="8.1" data-path="appendix.html"><a href="appendix.html#helpful-shortcuts"><i class="fa fa-check"></i><b>8.1</b> Helpful shortcuts</a></li>
<li class="chapter" data-level="8.2" data-path="appendix.html"><a href="appendix.html#sec:navigation"><i class="fa fa-check"></i><b>8.2</b> Navigating the file system</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="appendix.html"><a href="appendix.html#sec:filesystem"><i class="fa fa-check"></i><b>8.2.1</b> The file system</a></li>
<li class="chapter" data-level="8.2.2" data-path="appendix.html"><a href="appendix.html#working-directory"><i class="fa fa-check"></i><b>8.2.2</b> Working directory</a></li>
<li class="chapter" data-level="8.2.3" data-path="appendix.html"><a href="appendix.html#sec:navigationR"><i class="fa fa-check"></i><b>8.2.3</b> Navigating the file system using the R console</a></li>
<li class="chapter" data-level="8.2.4" data-path="appendix.html"><a href="appendix.html#sec:rstudioprojects"><i class="fa fa-check"></i><b>8.2.4</b> R Studio projects</a></li>
<li class="chapter" data-level="8.2.5" data-path="appendix.html"><a href="appendix.html#sec:winbackslash"><i class="fa fa-check"></i><b>8.2.5</b> Why do the Windows paths use the back-slash?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="appendix.html"><a href="appendix.html#troubleshooting"><i class="fa fa-check"></i><b>8.3</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li>&copy; Prof. Dr. Stephan Huber.</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p><img src="fig/cover.png" style="width:8cm" /><br />
How to Use R for Data Science</p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manage-data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Manage data<a href="manage-data.html#manage-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="the-tidyverse-universe" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> The tidyverse universe<a href="manage-data.html#the-tidyverse-universe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="float">
<img src="fig/tidyverse-logo.png" style="width:30.0%" alt=" The tidyverse universe" />
<div class="figcaption"> The tidyverse universe</div>
</div>
<p>The R package <em>tidyverse</em> is a collection of R packages. All packages share an underlying design philosophy, grammar, and data structures.
The most popular packages are <em>ggplot2</em>, <em>dplyr</em>, <em>tidyr</em>, <em>readr</em>, <em>purrr</em>, <em>tibble</em>, <em>stringr</em>, and <em>forcats</em>. They provide functionality to model, transform, and visualize data. Tidyverse is extremely popular and many individual packages of tidyverse are regularly in the top 10 most downloaded R packages on CRAN<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. How to do data science with tidyverse is the subject of multiple books and tutorials. In particular, the popular book <em>R for Data Science</em> by <span class="citation">Wickham &amp; Grolemund (<a href="references.html#ref-Wickham2023R">2023</a>)</span> is all about the tidyverse universe. Thus, I highly recommend reading sections 3 (<a href="https://r4ds.hadley.nz/workflow-basics.html">Workflow: basics</a>), 4 (<a href="https://r4ds.hadley.nz/data-transform.html">Data transformation</a>), and 6 (<a href="https://r4ds.hadley.nz/data-tidy">Data tidying</a>) of <span class="citation">Wickham &amp; Grolemund (<a href="references.html#ref-Wickham2023R">2023</a>)</span>. Additionally, visit www.tidyverse.org and, if you still haven’t done so, do the tidyverse module of my swirl package, called <em>swirl-it</em>, see section <a href="swirl.html#swirl">2</a>.</p>
<p>To install and load tidyverse run the following lines of code:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="manage-data.html#cb47-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb47-2"><a href="manage-data.html#cb47-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
</div>
<div id="pipeoperator" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> The pipe operator<a href="manage-data.html#pipeoperator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The pipe operator, %&gt;%, comes from the <em>magrittr</em> package, which is also part of the tidyverse package. The pipe operator, |&gt;, has been part of base R since version 4.1.0. For most cases, these two operators are identical. The pipe operator is designed to help you write code in a way that is easier to read and understand. As R is a functional language, code often contains a lot of parentheses, ( and ). Nesting these parentheses together can be complex and make your R code hard to read and understand, which is where |&gt; comes to the rescue! It allows you to use the output of a function as the input of the next function. Consider the following example of code to explain the usage of the pipe operator:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="manage-data.html#cb48-1" tabindex="-1"></a><span class="co"># create some data `x`</span></span>
<span id="cb48-2"><a href="manage-data.html#cb48-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.002</span>, <span class="fl">1.004</span>, .<span class="dv">99</span>, .<span class="dv">99</span>)</span>
<span id="cb48-3"><a href="manage-data.html#cb48-3" tabindex="-1"></a><span class="co"># take the logarithm of `x`, </span></span>
<span id="cb48-4"><a href="manage-data.html#cb48-4" tabindex="-1"></a>log_x <span class="ot">&lt;-</span> <span class="fu">log</span>(x)</span>
<span id="cb48-5"><a href="manage-data.html#cb48-5" tabindex="-1"></a><span class="co"># compute the lagged and iterated differences (see `diff()`)</span></span>
<span id="cb48-6"><a href="manage-data.html#cb48-6" tabindex="-1"></a>growth_rate_x <span class="ot">&lt;-</span> <span class="fu">diff</span>(log_x)</span>
<span id="cb48-7"><a href="manage-data.html#cb48-7" tabindex="-1"></a>growth_rate_x</span></code></pre></div>
<pre><code>## [1]  0.001998003  0.001994019 -0.014042357  0.000000000</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="manage-data.html#cb50-1" tabindex="-1"></a><span class="co"># round the result (4 digit)</span></span>
<span id="cb50-2"><a href="manage-data.html#cb50-2" tabindex="-1"></a>growth_rate_x_round <span class="ot">&lt;-</span> <span class="fu">round</span>(growth_rate_x, <span class="dv">4</span>)</span>
<span id="cb50-3"><a href="manage-data.html#cb50-3" tabindex="-1"></a>growth_rate_x_round </span></code></pre></div>
<pre><code>## [1]  0.002  0.002 -0.014  0.000</code></pre>
<p>That is rather long and we actually don’t need objects log_x, growth_rate_x, and growth_rate_x_round.
Well, then let us write that in a nested function:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="manage-data.html#cb52-1" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">diff</span>(<span class="fu">log</span>(x)), <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1]  0.002  0.002 -0.014  0.000</code></pre>
<p>This is short but hard to read and understand. The solution is the <em>pipe</em>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="manage-data.html#cb54-1" tabindex="-1"></a><span class="co"># load one of these packages: `magrittr` or `tidyverse`</span></span>
<span id="cb54-2"><a href="manage-data.html#cb54-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb54-3"><a href="manage-data.html#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="manage-data.html#cb54-4" tabindex="-1"></a><span class="co"># Perform the same computations on `x` as above</span></span>
<span id="cb54-5"><a href="manage-data.html#cb54-5" tabindex="-1"></a>x <span class="sc">|&gt;</span> </span>
<span id="cb54-6"><a href="manage-data.html#cb54-6" tabindex="-1"></a>  <span class="fu">log</span>() <span class="sc">|&gt;</span></span>
<span id="cb54-7"><a href="manage-data.html#cb54-7" tabindex="-1"></a>  <span class="fu">diff</span>() <span class="sc">|&gt;</span></span>
<span id="cb54-8"><a href="manage-data.html#cb54-8" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1]  0.002  0.002 -0.014  0.000</code></pre>
<p>You can read the |&gt; with <em>“and then”</em> because it takes the results of some function <em>“and then”</em> does something with that in the next.
For example, reading out loud the following code would sound something like this:</p>
<ul>
<li>I take the mtcars data, <em>and then</em></li>
<li>I consider only cars with more than 4 cylinders, <em>and then</em></li>
<li>I group the cars by the number of cylinders the cars have, <em>and then</em></li>
<li>I summarize the data and show the means of miles per gallon (mpg) and horse powers (hp) by groups of cars that distinguish by their number of cylinders.</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="manage-data.html#cb56-1" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="manage-data.html#cb56-2" tabindex="-1"></a>  <span class="fu">filter</span>(cyl<span class="sc">&gt;</span><span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="manage-data.html#cb56-3" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">|&gt;</span> </span>
<span id="cb56-4"><a href="manage-data.html#cb56-4" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;hp&quot;</span>), mean)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##     cyl   mpg    hp
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     6  19.7  122.
## 2     8  15.1  209.</code></pre>
</div>
<div id="import-data" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Import data<a href="manage-data.html#import-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="vectors-and-matrices" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Vectors and matrices<a href="manage-data.html#vectors-and-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We already got known to the c() function which allows to combine multiple values into a vector or list. Here are some examples how you can use this function to create vectors and matrices:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="manage-data.html#cb58-1" tabindex="-1"></a><span class="co"># defining multiple vectors using the colon operator `:`</span></span>
<span id="cb58-2"><a href="manage-data.html#cb58-2" tabindex="-1"></a>v_a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb58-3"><a href="manage-data.html#cb58-3" tabindex="-1"></a>v_a</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="manage-data.html#cb60-1" tabindex="-1"></a>v_b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb60-2"><a href="manage-data.html#cb60-2" tabindex="-1"></a>v_b</span></code></pre></div>
<pre><code>## [1] 10 11 12</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="manage-data.html#cb62-1" tabindex="-1"></a><span class="co"># creating matrix</span></span>
<span id="cb62-2"><a href="manage-data.html#cb62-2" tabindex="-1"></a>m_ab <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(v_a, v_b), <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb62-3"><a href="manage-data.html#cb62-3" tabindex="-1"></a>m_cbind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(v_a, v_b)</span>
<span id="cb62-4"><a href="manage-data.html#cb62-4" tabindex="-1"></a>m_rbind <span class="ot">&lt;-</span> <span class="fu">rbind</span>(v_a, v_b)</span>
<span id="cb62-5"><a href="manage-data.html#cb62-5" tabindex="-1"></a></span>
<span id="cb62-6"><a href="manage-data.html#cb62-6" tabindex="-1"></a><span class="co"># print matrix</span></span>
<span id="cb62-7"><a href="manage-data.html#cb62-7" tabindex="-1"></a><span class="fu">print</span>(m_ab)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   10
## [2,]    2   11
## [3,]    3   12</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="manage-data.html#cb64-1" tabindex="-1"></a><span class="fu">print</span>(m_cbind)</span></code></pre></div>
<pre><code>##      v_a v_b
## [1,]   1  10
## [2,]   2  11
## [3,]   3  12</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="manage-data.html#cb66-1" tabindex="-1"></a><span class="fu">print</span>(m_rbind)</span></code></pre></div>
<pre><code>##     [,1] [,2] [,3]
## v_a    1    2    3
## v_b   10   11   12</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="manage-data.html#cb68-1" tabindex="-1"></a><span class="co"># defining row names and column names</span></span>
<span id="cb68-2"><a href="manage-data.html#cb68-2" tabindex="-1"></a>rown <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;row_1&quot;</span>, <span class="st">&quot;row_2&quot;</span>, <span class="st">&quot;row_3&quot;</span>)</span>
<span id="cb68-3"><a href="manage-data.html#cb68-3" tabindex="-1"></a>coln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;col_1&quot;</span>, <span class="st">&quot;col_2&quot;</span>)</span>
<span id="cb68-4"><a href="manage-data.html#cb68-4" tabindex="-1"></a></span>
<span id="cb68-5"><a href="manage-data.html#cb68-5" tabindex="-1"></a><span class="co"># creating matrix</span></span>
<span id="cb68-6"><a href="manage-data.html#cb68-6" tabindex="-1"></a>m_ab_label <span class="ot">&lt;-</span> <span class="fu">matrix</span>(m_ab, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>, </span>
<span id="cb68-7"><a href="manage-data.html#cb68-7" tabindex="-1"></a>            <span class="at">dimnames =</span> <span class="fu">list</span>(rown, coln))</span>
<span id="cb68-8"><a href="manage-data.html#cb68-8" tabindex="-1"></a>  </span>
<span id="cb68-9"><a href="manage-data.html#cb68-9" tabindex="-1"></a><span class="co"># print matrix</span></span>
<span id="cb68-10"><a href="manage-data.html#cb68-10" tabindex="-1"></a><span class="fu">print</span>(m_ab_label)</span></code></pre></div>
<pre><code>##       col_1 col_2
## row_1     1    10
## row_2     2    11
## row_3     3    12</code></pre>
<p>The two most common formats to store and work with data in R are dataframe and tibble. Both formats store table-like structures of data in rows and columns. We will learn more on that in section <a href="manage-data.html#sec:tidy">5.4</a></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="manage-data.html#cb70-1" tabindex="-1"></a><span class="co"># convert the matrix into dataframe</span></span>
<span id="cb70-2"><a href="manage-data.html#cb70-2" tabindex="-1"></a>df_ab<span class="ot">=</span><span class="fu">as.data.frame</span>(m_ab_label)</span>
<span id="cb70-3"><a href="manage-data.html#cb70-3" tabindex="-1"></a>tbl_ab<span class="ot">=</span><span class="fu">as_tibble</span>(m_ab_label)</span></code></pre></div>
<div class="exercise">
<p><span id="exr:importcovid" class="exercise"><strong>Exercise 5.1  </strong></span>Import data</p>
<p>Table <code>r table_nums("tab:covid", display = "cite")</code> shows COVID for three states in Germany:</p>
<table>
<caption><code>r table_nums(name = "tab:covid", caption = "Covid cases and deaths till August 2022")</code></caption>
<colgroup>
<col width="24%" />
<col width="13%" />
<col width="34%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th>state</th>
<th>Bavaria</th>
<th>North Rhine-Westphalia</th>
<th>Baden-Württemberg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>deaths (in mio)</td>
<td>4,92M</td>
<td>5,32M</td>
<td>3,69M</td>
</tr>
<tr class="even">
<td>cases</td>
<td>24.111</td>
<td>25.466</td>
<td>16.145</td>
</tr>
</tbody>
</table>
<p>Write down the code you would need to put into the R-console…</p>
<ul>
<li>…to store each of variables <em>state</em> and <em>deaths</em> in a vector.</li>
<li>…to store both vectors in a data frame with the name <code>df_covid</code>.</li>
<li>…to store both vectors in a tibble with the name <code>tbl_covid</code>.</li>
</ul>
<p>Please find solution to the exercise <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/import_covid_data.R">here</a></p>
</div>
</div>
<div id="open-rdata-files" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Open RData files<a href="manage-data.html#open-rdata-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can save some of your objects with <code>save()</code> or all with <code>save.image()</code>. Load data that are stored in the <code>.RData</code> format can be loaded with <code>load()</code>. Please note, when you delete an object in R, you cannot recover it by clicking some <em>Undo button</em>.
With <code>rm()</code> you remove objects from your workspace and with <code>rm(list = ls())</code> you clear all objects from the workspace.</p>
</div>
<div id="open-datasets-of-packages" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Open datasets of packages<a href="manage-data.html#open-datasets-of-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The datasets package contains numerous datasets that are commonly used in textbooks.
To get an overview of all the datasets provided by the package, you can use the command help(package = datasets).
One such dataset that we will be using further is the <code>mtcars</code> dataset:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="manage-data.html#cb71-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;datasets&quot;</span>)</span>
<span id="cb71-2"><a href="manage-data.html#cb71-2" tabindex="-1"></a><span class="fu">head</span>(mtcars, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4     21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710    22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="manage-data.html#cb73-1" tabindex="-1"></a>?mtcars  <span class="co"># data dictionary</span></span></code></pre></div>
</div>
<div id="import-data-using-public-apis" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Import data using public APIs<a href="manage-data.html#import-data-using-public-apis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An API which stands for <em>application programming interface</em> specifies how computers can exchange information. There are many R packages available that provide a convenient way to access data from various online sources directly within R using the API of webpages. In most cases, it’s better to download and import data within R using these tools than to navigate through the website’s interface. This ensures that changes can be made easily at any time and that the data is always up-to-date. For instance, <code>wbstats</code> provides access to World Bank data, <code>eurostat</code> allows users to access Eurostat databases, <code>fredr</code> makes it easy to obtain data from the Federal Reserve Economic Data (FRED) platform, which offers economic data for the United States, <code>ecb</code> provides an interface to the European Central Bank’s Statistical Data Warehouse, and the <code>OECD</code> package facilitates the extraction of data from the Organization for Economic Cooperation and Development (OECD). Here is an example using the <code>wbstats</code> package:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="manage-data.html#cb74-1" tabindex="-1"></a><span class="co"># install.packages(&quot;wbstats&quot;) </span></span>
<span id="cb74-2"><a href="manage-data.html#cb74-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;wbstats&quot;</span>)</span>
<span id="cb74-3"><a href="manage-data.html#cb74-3" tabindex="-1"></a><span class="co"># GDP at market prices (current US$) for all available countries and regions</span></span>
<span id="cb74-4"><a href="manage-data.html#cb74-4" tabindex="-1"></a>df_gdp <span class="ot">&lt;-</span> <span class="fu">wb</span>(<span class="at">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>)</span>
<span id="cb74-5"><a href="manage-data.html#cb74-5" tabindex="-1"></a><span class="fu">head</span>(df_gdp, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   iso3c date        value    indicatorID         indicator iso2c                     country
## 1   AFE 2022 1.169484e+12 NY.GDP.MKTP.CD GDP (current US$)    ZH Africa Eastern and Southern
## 2   AFE 2021 1.081998e+12 NY.GDP.MKTP.CD GDP (current US$)    ZH Africa Eastern and Southern
## 3   AFE 2020 9.275933e+11 NY.GDP.MKTP.CD GDP (current US$)    ZH Africa Eastern and Southern</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="manage-data.html#cb76-1" tabindex="-1"></a><span class="fu">glimpse</span>(df_gdp)</span></code></pre></div>
<pre><code>## Rows: 13,365
## Columns: 7
## $ iso3c       &lt;chr&gt; &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, &quot;AFE&quot;, …
## $ date        &lt;chr&gt; &quot;2022&quot;, &quot;2021&quot;, &quot;2020&quot;, &quot;2019&quot;, &quot;2018&quot;, &quot;2017&quot;, &quot;2016&quot;, &quot;2015&quot;, &quot;2014&quot;, &quot;2013&quot;, &quot;201…
## $ value       &lt;dbl&gt; 1.169484e+12, 1.081998e+12, 9.275933e+11, 1.000834e+12, 1.007196e+12, 1.021043e+12, …
## $ indicatorID &lt;chr&gt; &quot;NY.GDP.MKTP.CD&quot;, &quot;NY.GDP.MKTP.CD&quot;, &quot;NY.GDP.MKTP.CD&quot;, &quot;NY.GDP.MKTP.CD&quot;, &quot;NY.GDP.MKTP…
## $ indicator   &lt;chr&gt; &quot;GDP (current US$)&quot;, &quot;GDP (current US$)&quot;, &quot;GDP (current US$)&quot;, &quot;GDP (current US$)&quot;, …
## $ iso2c       &lt;chr&gt; &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, &quot;ZH&quot;, …
## $ country     &lt;chr&gt; &quot;Africa Eastern and Southern&quot;, &quot;Africa Eastern and Southern&quot;, &quot;Africa Eastern and So…</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="manage-data.html#cb78-1" tabindex="-1"></a><span class="fu">summary</span>(df_gdp)</span></code></pre></div>
<pre><code>##     iso3c               date               value           indicatorID         indicator        
##  Length:13365       Length:13365       Min.   :8.825e+06   Length:13365       Length:13365      
##  Class :character   Class :character   1st Qu.:2.523e+09   Class :character   Class :character  
##  Mode  :character   Mode  :character   Median :1.843e+10   Mode  :character   Mode  :character  
##                                        Mean   :1.207e+12                                        
##                                        3rd Qu.:2.244e+11                                        
##                                        Max.   :1.006e+14                                        
##     iso2c             country         
##  Length:13365       Length:13365      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
## </code></pre>
</div>
<div id="import-various-file-formats" class="section level3 hasAnchor" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Import various file formats<a href="manage-data.html#import-various-file-formats" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="fig/import-logo.png" style="width:50.0%" alt=" The logo of the packages readr, haven, and readxl" />
<div class="figcaption"> The logo of the packages readr, haven, and readxl</div>
</div>
<p>RStudio provides convenient data import tools that can be accessed by clicking <em>File &gt; Import Dataset</em>. In addition, tidyverse offers packages for importing data in various formats. This <a href="https://posit.co/wp-content/uploads/2022/10/data-import.pdf">cheatsheet</a>, for example, is about the packages <code>readr</code>, <code>readxl</code> and <code>googlesheets4</code>. The first allows you to read data in various file formats, including fixed-width files like .csv and .tsv. The package <code>readxl</code> can read in Excel files, i.e., .xls and .xlsx file formats and <code>googlesheets4</code> allows to read and write data from Google Sheets directly from R.</p>
<p>For more information, I recommend once again the second version book <em>R for Data Science</em> by <a href="https://r4ds.hadley.nz/"><span class="citation">Wickham &amp; Grolemund (<span>2023</span>)</span></a>. In particular, check out the <a href="https://r4ds.hadley.nz/data-tidy.html">“Data tidying”</a> section for importing CSV and TSV files, the <a href="https://r4ds.hadley.nz/spreadsheets.html">“Spreadsheets”</a> section for Excel files, the <a href="https://r4ds.hadley.nz/databases.html">“Databases”</a> section for retrieving data with SQL, the <a href="https://r4ds.hadley.nz/arrow.html">“Arrow”</a> section for working with large datasets, and the <a href="https://r4ds.hadley.nz/webscraping.html">“Web scraping”</a> section for extracting data from web pages.</p>
<p>For an overview on packages for reading data that are provided by the tidyverse universe, see <a href="https://www.tidyverse.org/packages/#import">here</a>.</p>
</div>
</div>
<div id="sec:tidy" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Data<a href="manage-data.html#sec:tidy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data-frames-and-tibbles" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Data frames and tibbles<a href="manage-data.html#data-frames-and-tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="fig/tidyr-tibble-logo.png" style="width:30.0%" alt=" The logos of the tidyr and tibble packages" />
<div class="figcaption"> The logos of the tidyr and tibble packages</div>
</div>
<p>Both <em>data frames</em> and <em>tibbles</em> are two of the most commonly used data structures in R for handling tabular data. A tibble actually is a data frame and you can use all functions that work with a data frame also with a tibble. However, a tibble has some additional features in printing and subsetting. Please note, data frames are provided by base R while tibbles are provided by the <code>tidyverse</code> package. This means that if you want to use tibbles you must load <code>tidyverse</code>. It turned out that it is helpful that a tibble has the folllowing features to simplify working with data:
- Each vector is labeled by the variable name.
- Variable names don’t have spaces and are not put in quotes.
- All variables have the same length.
- Each variable is of a single type (numeric, character, logical, or a categorical).</p>
</div>
<div id="tidy-data" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Tidy data<a href="manage-data.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A popular quote from Hadley Wickham is that <em>“tidy datasets are all alike, but every messy dataset is messy in its own way”</em> <span class="citation">(<a href="references.html#ref-Hadley2014Tidy">Hadley, 2014, p. 2</a>)</span>. It paraphrases the fact that it is a good idea to set rules how a dataset should structure its information to make it easier to work with the data. The tidyverse requires the data to be structured like is illustrated in Figure <a href="#fig:tidy-1">5.4</a>. The rules are:</p>
<ol style="list-style-type: decimal">
<li>Each variable is a column and vice versa.</li>
<li>Each observation is a row and vice verse.</li>
<li>Each value is a cell.</li>
</ol>
<div class="float">
<img src="fig/tidy-1.png" style="width:100.0%" alt=" Features of a tidy dataset: variables are columns, observations are rows, and values are cells" />
<div class="figcaption"> Features of a tidy dataset: variables are columns, observations are rows, and values are cells<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></div>
</div>
<p>Whenever data follow that consistent structure, we speak of <em>tidy data</em>. The underlying uniformity of tidy data facilitates learning and using data manipulation tools.</p>
<p>One difference between data frames and tibbles is that dataframes store the row names. For example, take the <code>mtcars</code> dataset which consists of 32 different cars and the names of the cars are not stored as rownames:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="manage-data.html#cb80-1" tabindex="-1"></a><span class="fu">class</span>(mtcars) <span class="co"># mtcars is a data frame</span></span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="manage-data.html#cb82-1" tabindex="-1"></a><span class="fu">rownames</span>(mtcars) </span></code></pre></div>
<pre><code>##  [1] &quot;Mazda RX4&quot;           &quot;Mazda RX4 Wag&quot;       &quot;Datsun 710&quot;          &quot;Hornet 4 Drive&quot;     
##  [5] &quot;Hornet Sportabout&quot;   &quot;Valiant&quot;             &quot;Duster 360&quot;          &quot;Merc 240D&quot;          
##  [9] &quot;Merc 230&quot;            &quot;Merc 280&quot;            &quot;Merc 280C&quot;           &quot;Merc 450SE&quot;         
## [13] &quot;Merc 450SL&quot;          &quot;Merc 450SLC&quot;         &quot;Cadillac Fleetwood&quot;  &quot;Lincoln Continental&quot;
## [17] &quot;Chrysler Imperial&quot;   &quot;Fiat 128&quot;            &quot;Honda Civic&quot;         &quot;Toyota Corolla&quot;     
## [21] &quot;Toyota Corona&quot;       &quot;Dodge Challenger&quot;    &quot;AMC Javelin&quot;         &quot;Camaro Z28&quot;         
## [25] &quot;Pontiac Firebird&quot;    &quot;Fiat X1-9&quot;           &quot;Porsche 914-2&quot;       &quot;Lotus Europa&quot;       
## [29] &quot;Ford Pantera L&quot;      &quot;Ferrari Dino&quot;        &quot;Maserati Bora&quot;       &quot;Volvo 142E&quot;</code></pre>
<p>To store <code>mtcars</code> as a tibble, we can use the <code>as_tibble</code> function:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="manage-data.html#cb84-1" tabindex="-1"></a>tbl_mtcars <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars)</span>
<span id="cb84-2"><a href="manage-data.html#cb84-2" tabindex="-1"></a><span class="fu">class</span>(tbl_mtcars) <span class="co"># check if it is a tibble now</span></span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="manage-data.html#cb86-1" tabindex="-1"></a><span class="fu">is_tibble</span>(tbl_mtcars) <span class="co"># alternative check</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="manage-data.html#cb88-1" tabindex="-1"></a><span class="fu">head</span>(tbl_mtcars, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 11
##     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4
## 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4
## 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</code></pre>
<p>When we look at the data, we’ve lost the names of the cars. To store the these, you need to first add a column to the dataframe containing the rownames and then you can generate the tibble:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="manage-data.html#cb90-1" tabindex="-1"></a>tbl_mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb90-2"><a href="manage-data.html#cb90-2" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;car&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-3"><a href="manage-data.html#cb90-3" tabindex="-1"></a>  <span class="fu">as_tibble</span>() </span>
<span id="cb90-4"><a href="manage-data.html#cb90-4" tabindex="-1"></a><span class="fu">class</span>(tbl_mtcars)</span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="manage-data.html#cb92-1" tabindex="-1"></a><span class="fu">head</span>(tbl_mtcars, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 12
##   car             mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mazda RX4      21       6   160   110  3.9   2.62  16.5     0     1     4     4
## 2 Mazda RX4 Wag  21       6   160   110  3.9   2.88  17.0     0     1     4     4
## 3 Datsun 710     22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</code></pre>
</div>
<div id="data-types" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Data types<a href="manage-data.html#data-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, different data classes, or types of data exist:</p>
<ul>
<li><em>numeric</em>: can be any real number</li>
<li><em>character</em>: strings and characters</li>
<li><em>integer</em>: any whole numbers</li>
<li><em>factor</em>: any categorical or qualitative variable with finite number of distinct outcomes</li>
<li><em>logical</em>: contain either <code>TRUE</code> or <code>FALSE</code></li>
<li><em>Date</em>: special format that describes time</li>
</ul>
<p>The following example should exemplify these types of data:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="manage-data.html#cb94-1" tabindex="-1"></a>integer_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb94-2"><a href="manage-data.html#cb94-2" tabindex="-1"></a>numeric_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="cn">NA</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>)</span>
<span id="cb94-3"><a href="manage-data.html#cb94-3" tabindex="-1"></a>character_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;cherry&quot;</span>, <span class="st">&quot;grape&quot;</span>)</span>
<span id="cb94-4"><a href="manage-data.html#cb94-4" tabindex="-1"></a>factor_var <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>))</span>
<span id="cb94-5"><a href="manage-data.html#cb94-5" tabindex="-1"></a>logical_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb94-6"><a href="manage-data.html#cb94-6" tabindex="-1"></a>date_var <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-02-01&quot;</span>, <span class="st">&quot;2022-03-01&quot;</span>, <span class="st">&quot;2022-04-01&quot;</span>, <span class="st">&quot;2022-05-01&quot;</span>))</span>
<span id="cb94-7"><a href="manage-data.html#cb94-7" tabindex="-1"></a></span>
<span id="cb94-8"><a href="manage-data.html#cb94-8" tabindex="-1"></a>date_var[<span class="dv">2</span>] <span class="sc">-</span> date_var[<span class="dv">5</span>] <span class="co"># number of days in between these two dates</span></span></code></pre></div>
<pre><code>## Time difference of -89 days</code></pre>
<p>There are some special data values used in R that needs further explanation:</p>
<ul>
<li><code>NA</code> stands for <em>not available</em> or <em>missing</em> and is used to represent missing or undefined values.</li>
<li><code>Inf</code> stands for <em>infinity</em> and is used to represent mathematical infinity, such as the result of dividing a non-zero number by zero. Can be positive or negative.<br />
</li>
<li><code>NULL</code> represents an empty or non-existent object. It is often used as a placeholder when a value or object is not yet available or when an object is intentionally removed.</li>
<li><code>NaN</code> stands for <em>not a number</em> and is used to represent an undefined or unrepresentable value, such as the result of taking the square root of a negative number. It can also occur as a result of certain arithmetic operations that are undefined. In contrast to <code>NA</code> it can only exist in numerical data.</li>
</ul>
</div>
</div>
<div id="tools-to-manipulate-data" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Tools to manipulate data<a href="manage-data.html#tools-to-manipulate-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="the-in-operator" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> The <code>%in%</code> operator<a href="manage-data.html#the-in-operator" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>%in%</code> is used to subset a vector by comparison. Here’s an example:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="manage-data.html#cb96-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb96-2"><a href="manage-data.html#cb96-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb96-3"><a href="manage-data.html#cb96-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb96-4"><a href="manage-data.html#cb96-4" tabindex="-1"></a></span>
<span id="cb96-5"><a href="manage-data.html#cb96-5" tabindex="-1"></a>x <span class="sc">%in%</span> y  </span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="manage-data.html#cb98-1" tabindex="-1"></a>x <span class="sc">%in%</span> z  </span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="manage-data.html#cb100-1" tabindex="-1"></a>z <span class="sc">%in%</span> x</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<p>The %in% operator can be used in combination with other functions like <code>subset()</code> and <code>filter()</code>.</p>
</div>
<div id="extract-operators" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Extract operators<a href="manage-data.html#extract-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <em>extract operators</em> are used to retrieve data from objects in R. The operator may take four forms, including <code>[]</code>, <code>[[]]</code>, and <code>$</code>.</p>
<p><code>[]</code> allows to extract content from vector, lists, or data frames. For example,</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="manage-data.html#cb102-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> mtcars[<span class="dv">3</span>, ]</span>
<span id="cb102-2"><a href="manage-data.html#cb102-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> mtcars[<span class="st">&quot;Datsun 710&quot;</span>, ]</span>
<span id="cb102-3"><a href="manage-data.html#cb102-3" tabindex="-1"></a><span class="fu">identical</span>(a, b)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="manage-data.html#cb104-1" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>##             mpg cyl disp hp drat   wt  qsec vs am gear carb
## Datsun 710 22.8   4  108 93 3.85 2.32 18.61  1  1    4    1</code></pre>
<p>extracts the third observation of the mtcars dataset, and</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="manage-data.html#cb106-1" tabindex="-1"></a>c <span class="ot">&lt;-</span> mtcars[,<span class="st">&quot;cyl&quot;</span>]</span>
<span id="cb106-2"><a href="manage-data.html#cb106-2" tabindex="-1"></a>d <span class="ot">&lt;-</span> mtcars[, <span class="dv">2</span>]</span>
<span id="cb106-3"><a href="manage-data.html#cb106-3" tabindex="-1"></a><span class="fu">identical</span>(x, y)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="manage-data.html#cb108-1" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
<p>extracts the variable/vector <code>cyl</code>.</p>
<p>The operators, <code>[[]]</code> and <code>$</code> extract a single item from an object. It is used to refer to an element in a list or a column in a data frame. For example,</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="manage-data.html#cb110-1" tabindex="-1"></a>e <span class="ot">&lt;-</span> mtcars<span class="sc">$</span>cyl</span>
<span id="cb110-2"><a href="manage-data.html#cb110-2" tabindex="-1"></a>f <span class="ot">&lt;-</span> mtcars[[<span class="st">&quot;cyl&quot;</span>]]</span>
<span id="cb110-3"><a href="manage-data.html#cb110-3" tabindex="-1"></a><span class="fu">identical</span>(e, f)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="manage-data.html#cb112-1" tabindex="-1"></a>e</span></code></pre></div>
<pre><code>##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
<p>will return the values of the variable <code>cyl</code> from the data frame <code>mtcars</code>.
Thus, x$y is actually just a short form for x[[“y”]].</p>
</div>
<div id="logical-operators" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Logical operators<a href="manage-data.html#logical-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The extract operators can be combined with the <em>logical operators</em> (more precisely, I should call these <em>binary relational operators</em>) that are shown in table Table 1.</p>
<table>
<caption>Table 1: Logical operators</caption>
<colgroup>
<col width="35%" />
<col width="14%" />
<col width="35%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>operation</th>
<th>operator</th>
<th>example input</th>
<th>answer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>less than</td>
<td><code>&lt;</code></td>
<td><code>2 &lt; 3</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>less than or equal to</td>
<td><code>&lt;=</code></td>
<td><code>2 &lt;= 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>greater than</td>
<td><code>&gt;</code></td>
<td><code>2 &gt; 3</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="even">
<td>greater than or equal to</td>
<td><code>&gt;=</code></td>
<td><code>2 &gt;= 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>equal to</td>
<td><code>==</code></td>
<td><code>2 == 3</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="even">
<td>not equal to</td>
<td><code>!=</code></td>
<td><code>2 != 3</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>not</td>
<td><code>!</code></td>
<td><code>!(1==1)</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>or</td>
<td><span class="math inline">\(\vert\)</span></td>
<td><code>(1==1)</code> <span class="math inline">\(\vert\)</span> <code>(2==3)</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>and</td>
<td><code>&amp;</code></td>
<td><code>(1==1) &amp; (2==3)</code></td>
<td><code>FALSE</code></td>
</tr>
</tbody>
</table>
<p>Here are some examples:
Select rows where the number of cylinders is greater than or equal to 6:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="manage-data.html#cb114-1" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">&gt;=</span> <span class="dv">6</span>, ]</span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</code></pre>
<p>Select rows where the number of cylinders is either 4 or 6:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="manage-data.html#cb116-1" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">4</span> <span class="sc">|</span> mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">6</span> , ]</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C      17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<p>Select rows where the number of cylinders is 4 and the mpg is greater than 22:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="manage-data.html#cb118-1" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">22</span>, ]</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
<p>Select rows where the weight is less than 3.5 or the number of gears is greater than 4:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="manage-data.html#cb120-1" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>wt <span class="sc">&lt;</span> <span class="fl">3.5</span> <span class="sc">|</span> mtcars<span class="sc">$</span>gear <span class="sc">&gt;</span> <span class="dv">4</span>, ]</span></code></pre></div>
<pre><code>##                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280          19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C         17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Fiat 128          32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic       30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla    33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona     21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## AMC Javelin       15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Fiat X1-9         27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2     26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa      30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L    15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino      19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora     15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E        21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<p>Select rows where either mpg is greater than 25 or carb is less than 2, and the number of cylinders is either 4 or 8.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="manage-data.html#cb122-1" tabindex="-1"></a>mtcars[(mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">25</span> <span class="sc">|</span> mtcars<span class="sc">$</span>carb <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="sc">&amp;</span> mtcars<span class="sc">$</span>cyl <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">8</span>), ]</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
</div>
<div id="if-statements" class="section level3 hasAnchor" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> If statements<a href="manage-data.html#if-statements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In many cases, it’s necessary to execute certain code only when a particular condition is met. To achieve this, there are several conditional statements that can be used in code. These include:</p>
<ul>
<li>The <code>if</code> statement: This is used to execute a block of code if a specified condition is true.</li>
<li>The <code>else</code> statement: This is used to execute a block of code if the same condition is false.</li>
<li>The <code>else</code> if statement: This is used to specify a new condition to test if the first condition is false.</li>
<li>The <code>ifelse()</code> function: This is used to check a condition for every element of a vector.</li>
</ul>
<p>The following examples should exemplify how these statements work:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="manage-data.html#cb124-1" tabindex="-1"></a><span class="co"># Example of if statement</span></span>
<span id="cb124-2"><a href="manage-data.html#cb124-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg) <span class="sc">&gt;</span> <span class="dv">20</span>) {</span>
<span id="cb124-3"><a href="manage-data.html#cb124-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is greater than 20.&quot;</span>)</span>
<span id="cb124-4"><a href="manage-data.html#cb124-4" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;The average miles per gallon is greater than 20.&quot;</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="manage-data.html#cb126-1" tabindex="-1"></a><span class="co"># Example of if-else statement</span></span>
<span id="cb126-2"><a href="manage-data.html#cb126-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg) <span class="sc">&gt;</span> <span class="dv">20</span>) {</span>
<span id="cb126-3"><a href="manage-data.html#cb126-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is greater than 20.&quot;</span>)</span>
<span id="cb126-4"><a href="manage-data.html#cb126-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb126-5"><a href="manage-data.html#cb126-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is less than or equal to 20.&quot;</span>)</span>
<span id="cb126-6"><a href="manage-data.html#cb126-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;The average miles per gallon is greater than 20.&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="manage-data.html#cb128-1" tabindex="-1"></a><span class="co"># Example of if-else if statement</span></span>
<span id="cb128-2"><a href="manage-data.html#cb128-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg) <span class="sc">&gt;</span> <span class="dv">25</span>) {</span>
<span id="cb128-3"><a href="manage-data.html#cb128-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is greater than 25.&quot;</span>)</span>
<span id="cb128-4"><a href="manage-data.html#cb128-4" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg) <span class="sc">&gt;</span> <span class="dv">20</span>) {</span>
<span id="cb128-5"><a href="manage-data.html#cb128-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is between 20 and 25.&quot;</span>)</span>
<span id="cb128-6"><a href="manage-data.html#cb128-6" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb128-7"><a href="manage-data.html#cb128-7" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The average miles per gallon is less than or equal to 20.&quot;</span>)</span>
<span id="cb128-8"><a href="manage-data.html#cb128-8" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;The average miles per gallon is between 20 and 25.&quot;</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="manage-data.html#cb130-1" tabindex="-1"></a><span class="co"># Example of if_else function</span></span>
<span id="cb130-2"><a href="manage-data.html#cb130-2" tabindex="-1"></a>mtcars_2 <span class="ot">&lt;-</span> mtcars</span>
<span id="cb130-3"><a href="manage-data.html#cb130-3" tabindex="-1"></a>mtcars_2<span class="sc">$</span>mpg_category <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(mtcars_2<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">&quot;High&quot;</span>, <span class="st">&quot;Low&quot;</span>)</span></code></pre></div>
<p>When you have a fixed number of cases and don’t want to use a long chain of if-else statements, you can use <code>case_when()</code>;</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="manage-data.html#cb131-1" tabindex="-1"></a>mtcars_cyl <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb131-2"><a href="manage-data.html#cb131-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cyl_category =</span> <span class="fu">case_when</span>(</span>
<span id="cb131-3"><a href="manage-data.html#cb131-3" tabindex="-1"></a>    cyl <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;four&quot;</span>,</span>
<span id="cb131-4"><a href="manage-data.html#cb131-4" tabindex="-1"></a>    cyl <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;six&quot;</span>,</span>
<span id="cb131-5"><a href="manage-data.html#cb131-5" tabindex="-1"></a>    cyl <span class="sc">==</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;eight&quot;</span></span>
<span id="cb131-6"><a href="manage-data.html#cb131-6" tabindex="-1"></a>  ))</span></code></pre></div>
<p>The <code>mutate()</code> function is used to add the new variable, and <code>case_when()</code> is used to assign the values “four”, “six”, or “eight” to the new variable based on the number of cylinders in each car. Both functions are part of the <code>dplyr</code> package (see chapter <a href="manage-data.html#ch:dplyr">5.6</a>).</p>
<p>It evaluates one of several expressions based on the value of a given control expression. It takes two arguments: the control expression and a list of named expressions, each of which is evaluated if its name matches the value of the control expression. If no match is found, an optional default expression is evaluated. The switch() function is particularly useful</p>
</div>
</div>
<div id="ch:dplyr" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Data manipulation with <code>dplyr</code><a href="manage-data.html#ch:dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="float">
<img src="fig/dplyr-logo.png" style="width:20.0%" alt=" The logo of the dplyr package" />
<div class="figcaption"> The logo of the <code>dplyr</code> package</div>
</div>
<p>The <code>dplyr</code> package is part of tidyverse and makes data manipulation easy:</p>
<ul>
<li>Reorder the rows (<code>arrange()</code>).</li>
<li>Pick observations by their values (<code>filter()</code>).</li>
<li>Pick variables by their names (<code>select()</code>).</li>
<li>Create new variables with functions of existing variables
(<code>mutate()</code>).</li>
<li>Collapse many values down to a single summary (<code>summarise()</code>).</li>
<li>Rename variables (<code>rename()</code>).</li>
</ul>
<p>These functions can all be used in conjunction with <code>group_by()</code> , which changes the scope of each function from operating on the entire dataset to operating on it group-by-group.</p>
<p>All functions work similarly:</p>
<ol style="list-style-type: decimal">
<li>The first argument is a data frame.</li>
<li>The subsequent arguments describe what to do with the data frame.</li>
<li>The result is a new data frame.</li>
</ol>
<p>Here are some examples that may help to understand these functions:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="manage-data.html#cb132-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb132-2"><a href="manage-data.html#cb132-2" tabindex="-1"></a></span>
<span id="cb132-3"><a href="manage-data.html#cb132-3" tabindex="-1"></a><span class="co"># load mtcars dataset</span></span>
<span id="cb132-4"><a href="manage-data.html#cb132-4" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb132-5"><a href="manage-data.html#cb132-5" tabindex="-1"></a></span>
<span id="cb132-6"><a href="manage-data.html#cb132-6" tabindex="-1"></a><span class="co"># arrange rows by mpg in descending order</span></span>
<span id="cb132-7"><a href="manage-data.html#cb132-7" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb132-8"><a href="manage-data.html#cb132-8" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mpg))</span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="manage-data.html#cb134-1" tabindex="-1"></a><span class="co"># filter rows where cyl = 4</span></span>
<span id="cb134-2"><a href="manage-data.html#cb134-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb134-3"><a href="manage-data.html#cb134-3" tabindex="-1"></a>  <span class="fu">filter</span>(cyl <span class="sc">==</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="manage-data.html#cb136-1" tabindex="-1"></a><span class="co"># select columns mpg, cyl, and hp</span></span>
<span id="cb136-2"><a href="manage-data.html#cb136-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb136-3"><a href="manage-data.html#cb136-3" tabindex="-1"></a>  <span class="fu">select</span>(mpg, cyl, hp) <span class="sc">|&gt;</span> </span>
<span id="cb136-4"><a href="manage-data.html#cb136-4" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl  hp
## Mazda RX4         21.0   6 110
## Mazda RX4 Wag     21.0   6 110
## Datsun 710        22.8   4  93
## Hornet 4 Drive    21.4   6 110
## Hornet Sportabout 18.7   8 175
## Valiant           18.1   6 105</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="manage-data.html#cb138-1" tabindex="-1"></a><span class="co"># select columns all variables except wt and hp</span></span>
<span id="cb138-2"><a href="manage-data.html#cb138-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb138-3"><a href="manage-data.html#cb138-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>wt, <span class="sc">-</span>hp) <span class="sc">|&gt;</span> </span>
<span id="cb138-4"><a href="manage-data.html#cb138-4" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl disp drat  qsec vs am gear carb
## Mazda RX4         21.0   6  160 3.90 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 3.90 17.02  0  1    4    4
## Datsun 710        22.8   4  108 3.85 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 3.08 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 3.15 17.02  0  0    3    2
## Valiant           18.1   6  225 2.76 20.22  1  0    3    1</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="manage-data.html#cb140-1" tabindex="-1"></a><span class="co"># select only variables starting with `c`</span></span>
<span id="cb140-2"><a href="manage-data.html#cb140-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb140-3"><a href="manage-data.html#cb140-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;c&quot;</span>))</span></code></pre></div>
<pre><code>##                     cyl carb
## Mazda RX4             6    4
## Mazda RX4 Wag         6    4
## Datsun 710            4    1
## Hornet 4 Drive        6    1
## Hornet Sportabout     8    2
## Valiant               6    1
## Duster 360            8    4
## Merc 240D             4    2
## Merc 230              4    2
## Merc 280              6    4
## Merc 280C             6    4
## Merc 450SE            8    3
## Merc 450SL            8    3
## Merc 450SLC           8    3
## Cadillac Fleetwood    8    4
## Lincoln Continental   8    4
## Chrysler Imperial     8    4
## Fiat 128              4    1
## Honda Civic           4    2
## Toyota Corolla        4    1
## Toyota Corona         4    1
## Dodge Challenger      8    2
## AMC Javelin           8    2
## Camaro Z28            8    4
## Pontiac Firebird      8    2
## Fiat X1-9             4    1
## Porsche 914-2         4    2
## Lotus Europa          4    2
## Ford Pantera L        8    4
## Ferrari Dino          6    6
## Maserati Bora         8    8
## Volvo 142E            4    2</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="manage-data.html#cb142-1" tabindex="-1"></a><span class="co"># summarize avg mpg by number of cylinders</span></span>
<span id="cb142-2"><a href="manage-data.html#cb142-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb142-3"><a href="manage-data.html#cb142-3" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">|&gt;</span> </span>
<span id="cb142-4"><a href="manage-data.html#cb142-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##     cyl avg_mpg
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1     4    26.7
## 2     6    19.7
## 3     8    15.1</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="manage-data.html#cb144-1" tabindex="-1"></a><span class="co"># create new column wt_kg, which is wt in kg</span></span>
<span id="cb144-2"><a href="manage-data.html#cb144-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb144-3"><a href="manage-data.html#cb144-3" tabindex="-1"></a>  <span class="fu">select</span>(wt) <span class="sc">|&gt;</span> </span>
<span id="cb144-4"><a href="manage-data.html#cb144-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wt_kg =</span> wt <span class="sc">/</span> <span class="fl">2.205</span>) <span class="sc">|&gt;</span> </span>
<span id="cb144-5"><a href="manage-data.html#cb144-5" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                      wt    wt_kg
## Mazda RX4         2.620 1.188209
## Mazda RX4 Wag     2.875 1.303855
## Datsun 710        2.320 1.052154
## Hornet 4 Drive    3.215 1.458050
## Hornet Sportabout 3.440 1.560091
## Valiant           3.460 1.569161</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="manage-data.html#cb146-1" tabindex="-1"></a><span class="co"># Create a new variable by calculating hp divided by wt</span></span>
<span id="cb146-2"><a href="manage-data.html#cb146-2" tabindex="-1"></a>mtcars_new <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb146-3"><a href="manage-data.html#cb146-3" tabindex="-1"></a>  <span class="fu">select</span>(wt, hp) <span class="sc">|&gt;</span> </span>
<span id="cb146-4"><a href="manage-data.html#cb146-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hp_per_t =</span> hp<span class="sc">/</span>wt) <span class="sc">|&gt;</span> </span>
<span id="cb146-5"><a href="manage-data.html#cb146-5" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb146-6"><a href="manage-data.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="manage-data.html#cb146-7" tabindex="-1"></a><span class="co"># Print the first few rows of the updated dataset</span></span>
<span id="cb146-8"><a href="manage-data.html#cb146-8" tabindex="-1"></a><span class="fu">head</span>(mtcars_new)</span></code></pre></div>
<pre><code>##                      wt  hp hp_per_t
## Mazda RX4         2.620 110 41.98473
## Mazda RX4 Wag     2.875 110 38.26087
## Datsun 710        2.320  93 40.08621
## Hornet 4 Drive    3.215 110 34.21462
## Hornet Sportabout 3.440 175 50.87209
## Valiant           3.460 105 30.34682</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="manage-data.html#cb148-1" tabindex="-1"></a><span class="co"># Rename hp to horsepower</span></span>
<span id="cb148-2"><a href="manage-data.html#cb148-2" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb148-3"><a href="manage-data.html#cb148-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">horsepower =</span> hp) <span class="sc">|&gt;</span> </span>
<span id="cb148-4"><a href="manage-data.html#cb148-4" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 32
## Columns: 11
## $ mpg        &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 1…
## $ cyl        &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8…
## $ disp       &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 167.6, 167.6, 275.8, 2…
## $ horsepower &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180, 205, 215, 230, 66,…
## $ drat       &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 3.07, 3.07, 3.07, 2…
## $ wt         &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.440, 3.440, 4.070, 3…
## $ qsec       &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, 18.30, 18.90, 17.40, 1…
## $ vs         &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0…
## $ am         &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1…
## $ gear       &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 4, 5, 5, 5…
## $ carb       &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4…</code></pre>
</div>
<div id="how-to-explore-a-dataset" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> How to explore a dataset<a href="manage-data.html#how-to-explore-a-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="manage-data.html#cb150-1" tabindex="-1"></a><span class="co"># Creating dataframe</span></span>
<span id="cb150-2"><a href="manage-data.html#cb150-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb150-3"><a href="manage-data.html#cb150-3" tabindex="-1"></a>  integer_var, numeric_var, character_var, factor_var, logical_var, date_var,</span>
<span id="cb150-4"><a href="manage-data.html#cb150-4" tabindex="-1"></a>)</span>
<span id="cb150-5"><a href="manage-data.html#cb150-5" tabindex="-1"></a></span>
<span id="cb150-6"><a href="manage-data.html#cb150-6" tabindex="-1"></a><span class="co"># Overview of the data</span></span>
<span id="cb150-7"><a href="manage-data.html#cb150-7" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 6
##   integer_var numeric_var character_var factor_var logical_var date_var  
##         &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;         &lt;fct&gt;      &lt;lgl&gt;       &lt;date&gt;    
## 1           1         1.1 apple         red        TRUE        2022-01-01
## 2           2         2.2 banana        yellow     TRUE        2022-02-01
## 3           3        NA   orange        red        TRUE        2022-03-01
## 4           4         4.4 cherry        blue       FALSE       2022-04-01
## 5           5         5.5 grape         green      TRUE        2022-05-01</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="manage-data.html#cb152-1" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##   integer_var  numeric_var    character_var       factor_var logical_var        date_var         
##  Min.   :1    Min.   :1.100   Length:5           blue  :1    Mode :logical   Min.   :2022-01-01  
##  1st Qu.:2    1st Qu.:1.925   Class :character   green :1    FALSE:1         1st Qu.:2022-02-01  
##  Median :3    Median :3.300   Mode  :character   red   :2    TRUE :4         Median :2022-03-01  
##  Mean   :3    Mean   :3.300                      yellow:1                    Mean   :2022-03-02  
##  3rd Qu.:4    3rd Qu.:4.675                                                  3rd Qu.:2022-04-01  
##  Max.   :5    Max.   :5.500                                                  Max.   :2022-05-01  
##               NA&#39;s   :1</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="manage-data.html#cb154-1" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code></pre></div>
<pre><code>## Rows: 5
## Columns: 6
## $ integer_var   &lt;dbl&gt; 1, 2, 3, 4, 5
## $ numeric_var   &lt;dbl&gt; 1.1, 2.2, NA, 4.4, 5.5
## $ character_var &lt;chr&gt; &quot;apple&quot;, &quot;banana&quot;, &quot;orange&quot;, &quot;cherry&quot;, &quot;grape&quot;
## $ factor_var    &lt;fct&gt; red, yellow, red, blue, green
## $ logical_var   &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, TRUE
## $ date_var      &lt;date&gt; 2022-01-01, 2022-02-01, 2022-03-01, 2022-04-01, 2022-05-01</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="manage-data.html#cb156-1" tabindex="-1"></a><span class="co"># look closer at variables</span></span>
<span id="cb156-2"><a href="manage-data.html#cb156-2" tabindex="-1"></a></span>
<span id="cb156-3"><a href="manage-data.html#cb156-3" tabindex="-1"></a><span class="co"># unique values</span></span>
<span id="cb156-4"><a href="manage-data.html#cb156-4" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>integer_var)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="manage-data.html#cb158-1" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>factor_var)</span></code></pre></div>
<pre><code>## [1] red    yellow blue   green 
## Levels: blue green red yellow</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="manage-data.html#cb160-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>factor_var)</span></code></pre></div>
<pre><code>## 
##   blue  green    red yellow 
##      1      1      2      1</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="manage-data.html#cb162-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>factor_var))</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="manage-data.html#cb164-1" tabindex="-1"></a><span class="co"># distributions</span></span>
<span id="cb164-2"><a href="manage-data.html#cb164-2" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">count</span>(factor_var)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   factor_var     n
##   &lt;fct&gt;      &lt;int&gt;
## 1 blue           1
## 2 green          1
## 3 red            2
## 4 yellow         1</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="manage-data.html#cb166-1" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(df<span class="sc">$</span>factor_var))</span></code></pre></div>
<pre><code>## 
##   blue  green    red yellow 
##    0.2    0.2    0.4    0.2</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="manage-data.html#cb168-1" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb168-2"><a href="manage-data.html#cb168-2" tabindex="-1"></a>  <span class="fu">count</span>(factor_var) <span class="sc">|&gt;</span> </span>
<span id="cb168-3"><a href="manage-data.html#cb168-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   factor_var     n  prop
##   &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt;
## 1 blue           1   0.2
## 2 green          1   0.2
## 3 red            2   0.4
## 4 yellow         1   0.2</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="manage-data.html#cb170-1" tabindex="-1"></a><span class="fu">aggregate</span>(df<span class="sc">$</span>numeric_var, </span>
<span id="cb170-2"><a href="manage-data.html#cb170-2" tabindex="-1"></a>          <span class="at">by =</span> <span class="fu">list</span>(<span class="at">fruit =</span> df<span class="sc">$</span>factor_var), </span>
<span id="cb170-3"><a href="manage-data.html#cb170-3" tabindex="-1"></a>          mean)</span></code></pre></div>
<pre><code>##    fruit   x
## 1   blue 4.4
## 2  green 5.5
## 3    red  NA
## 4 yellow 2.2</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="manage-data.html#cb172-1" tabindex="-1"></a><span class="co"># --&gt; the mean of red cannot be calculated as there is a NA in it</span></span>
<span id="cb172-2"><a href="manage-data.html#cb172-2" tabindex="-1"></a><span class="co"># Solution: exclude NAs from calculation:</span></span>
<span id="cb172-3"><a href="manage-data.html#cb172-3" tabindex="-1"></a><span class="fu">aggregate</span>(df<span class="sc">$</span>numeric_var, </span>
<span id="cb172-4"><a href="manage-data.html#cb172-4" tabindex="-1"></a>          <span class="at">by =</span> <span class="fu">list</span>(<span class="at">fruit =</span> df<span class="sc">$</span>factor_var), </span>
<span id="cb172-5"><a href="manage-data.html#cb172-5" tabindex="-1"></a>          mean,</span>
<span id="cb172-6"><a href="manage-data.html#cb172-6" tabindex="-1"></a>          <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##    fruit   x
## 1   blue 4.4
## 2  green 5.5
## 3    red 1.1
## 4 yellow 2.2</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="manage-data.html#cb174-1" tabindex="-1"></a><span class="co">#install.packages(&quot;janitor&quot;)</span></span>
<span id="cb174-2"><a href="manage-data.html#cb174-2" tabindex="-1"></a><span class="fu">require</span>(<span class="st">&quot;janitor&quot;</span>)</span>
<span id="cb174-3"><a href="manage-data.html#cb174-3" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb174-4"><a href="manage-data.html#cb174-4" tabindex="-1"></a>  <span class="fu">tabyl</span>(cyl) </span></code></pre></div>
<pre><code>##  cyl  n percent
##    4 11 0.34375
##    6  7 0.21875
##    8 14 0.43750</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="manage-data.html#cb176-1" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb176-2"><a href="manage-data.html#cb176-2" tabindex="-1"></a>  <span class="fu">tabyl</span>(cyl, hp) </span></code></pre></div>
<pre><code>##  cyl 52 62 65 66 91 93 95 97 105 109 110 113 123 150 175 180 205 215 230 245 264 335
##    4  1  1  1  2  1  1  1  1   0   1   0   1   0   0   0   0   0   0   0   0   0   0
##    6  0  0  0  0  0  0  0  0   1   0   3   0   2   0   1   0   0   0   0   0   0   0
##    8  0  0  0  0  0  0  0  0   0   0   0   0   0   2   2   3   1   1   1   2   1   1</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>CRAN is a network of ftp and web servers around the world that store identical, up-to-date, versions of code and documentation for R, see: <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a>.<a href="manage-data.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The figure stems from <span class="citation">Wickham &amp; Grolemund (<a href="references.html#ref-Wickham2023R">2023</a>)</span><a href="manage-data.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="collection-of-exercises.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
