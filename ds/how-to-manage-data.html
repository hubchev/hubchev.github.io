<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 How to manage data | How to Use R for Data Science</title>
  <meta name="description" content="4 How to manage data | How to Use R for Data Science" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="4 How to manage data | How to Use R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 How to manage data | How to Use R for Data Science" />
  
  
  

<meta name="author" content="© Prof. Dr. Stephan Huber (Stephan.Huber@hs-fresenius.de)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="how-to-work-with-r-scripts.html"/>
<link rel="next" href="how-to-visualize-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="preamble.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">How to Use R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#sec:whyR"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#howtolearnr"><i class="fa fa-check"></i><b>1.2</b> How to learn R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#Rlearninglit"><i class="fa fa-check"></i><b>1.3</b> Learning resources</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>1.4</b> What are R and RStudio?</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#how-to-use-r-and-rstudio-without-installation"><i class="fa fa-check"></i><b>1.5</b> How to use R and RStudio without installation</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#installing"><i class="fa fa-check"></i><b>1.6</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#packages"><i class="fa fa-check"></i><b>1.7</b> What are R packages?</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="getting-started.html"><a href="getting-started.html#package-installation"><i class="fa fa-check"></i><b>1.7.1</b> Package installation</a></li>
<li class="chapter" data-level="1.7.2" data-path="getting-started.html"><a href="getting-started.html#package-loading"><i class="fa fa-check"></i><b>1.7.2</b> Package loading</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="getting-started.html"><a href="getting-started.html#dont-do-it"><i class="fa fa-check"></i><b>1.8</b> Don’t do it</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="swirl.html"><a href="swirl.html"><i class="fa fa-check"></i><b>2</b> Learn interactively with swirl</a></li>
<li class="chapter" data-level="3" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html"><i class="fa fa-check"></i><b>3</b> How to work with R scripts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#r-scripts-why-they-are-useful"><i class="fa fa-check"></i><b>3.1</b> R Scripts: Why they are useful</a></li>
<li class="chapter" data-level="3.2" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#generate-write-and-run-r-scripts"><i class="fa fa-check"></i><b>3.2</b> Generate, write and run R scripts</a></li>
<li class="chapter" data-level="3.3" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#sec:assignmentoper"><i class="fa fa-check"></i><b>3.3</b> The assignment operator: <code>&lt;-</code></a></li>
<li class="chapter" data-level="3.4" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#doing-calculation-in-scripts"><i class="fa fa-check"></i><b>3.4</b> Doing calculation in scripts</a></li>
<li class="chapter" data-level="3.5" data-path="how-to-work-with-r-scripts.html"><a href="how-to-work-with-r-scripts.html#sec:generics"><i class="fa fa-check"></i><b>3.5</b> User-defined functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="how-to-manage-data.html"><a href="how-to-manage-data.html"><i class="fa fa-check"></i><b>4</b> How to manage data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="how-to-manage-data.html"><a href="how-to-manage-data.html#the-tidyverse-universe"><i class="fa fa-check"></i><b>4.1</b> The tidyverse universe</a></li>
<li class="chapter" data-level="4.2" data-path="how-to-manage-data.html"><a href="how-to-manage-data.html#the-pipe-operator"><i class="fa fa-check"></i><b>4.2</b> The pipe operator</a></li>
<li class="chapter" data-level="4.3" data-path="how-to-manage-data.html"><a href="how-to-manage-data.html#data-manipulation-with-dplyr"><i class="fa fa-check"></i><b>4.3</b> Data manipulation with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="how-to-visualize-data.html"><a href="how-to-visualize-data.html"><i class="fa fa-check"></i><b>5</b> How to visualize data</a></li>
<li class="chapter" data-level="6" data-path="how-to-write-reports-with-r-markdown.html"><a href="how-to-write-reports-with-r-markdown.html"><i class="fa fa-check"></i><b>6</b> How to write reports with R Markdown</a></li>
<li class="chapter" data-level="7" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>7</b> Appendix</a>
<ul>
<li class="chapter" data-level="7.1" data-path="appendix.html"><a href="appendix.html#sec:navigation"><i class="fa fa-check"></i><b>7.1</b> Navigating the file system</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="appendix.html"><a href="appendix.html#sec:filesystem"><i class="fa fa-check"></i><b>7.1.1</b> The file system</a></li>
<li class="chapter" data-level="7.1.2" data-path="appendix.html"><a href="appendix.html#working-directory"><i class="fa fa-check"></i><b>7.1.2</b> Working directory</a></li>
<li class="chapter" data-level="7.1.3" data-path="appendix.html"><a href="appendix.html#sec:navigationR"><i class="fa fa-check"></i><b>7.1.3</b> Navigating the file system using the R console</a></li>
<li class="chapter" data-level="7.1.4" data-path="appendix.html"><a href="appendix.html#sec:winbackslash"><i class="fa fa-check"></i><b>7.1.4</b> Why do the Windows paths use the back-slash?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li>&copy; Prof. Dr. Stephan Huber.</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">How to Use R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="how-to-manage-data" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> How to manage data<a href="how-to-manage-data.html#how-to-manage-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="the-tidyverse-universe" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> The tidyverse universe<a href="how-to-manage-data.html#the-tidyverse-universe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The R package <em>tidyverse</em> is a collection of R packages. All packages share an underlying design philosophy, grammar, and data structures.
The most popular packages are ggplot2, dplyr, tidyr, readr, purrr, tibble, stringr, and forcats. They provide functionality to model, transform, and visualize data. Tidyverse is extremely popular and many individual packages of tidyverse are regularly in the top 10 most downloaded R packages on CRAN<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. How to do data science with tidyverse is the subject of multiple books and tutorials. The popular book <em>R for Data Science</em> by <span class="citation">Wickham and Grolemund (<a href="references.html#ref-Wickham2023R" role="doc-biblioref">2023</a>)</span> is all about the tidyverse universe. Thus, I highly recommend reading sections 3 (<a href="https://r4ds.hadley.nz/workflow-basics.html">Workflow: basics</a>) and 4 (<a href="https://r4ds.hadley.nz/data-transform.html">Data transformation</a>) of <span class="citation">Wickham and Grolemund (<a href="references.html#ref-Wickham2023R" role="doc-biblioref">2023</a>)</span>. Addidionally, visit www.tidyverse.org and, if you still haven`t done so, do the tidyverse module of my swirl package, called <em>swirl-it</em>, see section @swirl.</p>
<p>To install and load tidyverse run the following lines of code:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="how-to-manage-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb42-2"><a href="how-to-manage-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
</div>
<div id="the-pipe-operator" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> The pipe operator<a href="how-to-manage-data.html#the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The pipe operator, %&gt;%, comes from the magrittr package which is also a part of the tidyverse package. The <em>base</em> pipe operator, |&gt;, is since R.4.1.0 part of base R. For most cases these two are identical. The pipe is to help you write code in a way that is easier to read and understand.
As R is a functional language, code often contains a lot of parenthesis, ( and ). Nesting those parentheses together is complex and you easily get lost. This makes your R code hard to read and understand. Here’s where %&gt;% comes in to the rescue! Consider the following chunk of code to explain the usage of the pipe:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="how-to-manage-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create some data `x`</span></span>
<span id="cb43-2"><a href="how-to-manage-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.109</span>, <span class="fl">0.359</span>, <span class="fl">0.63</span>, <span class="fl">0.996</span>, <span class="fl">0.515</span>, <span class="fl">0.142</span>, <span class="fl">0.017</span>, <span class="fl">0.829</span>, <span class="fl">0.907</span>)</span>
<span id="cb43-3"><a href="how-to-manage-data.html#cb43-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 0.109 0.359 0.630 0.996 0.515 0.142 0.017 0.829 0.907</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="how-to-manage-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take the logarithm of `x`, </span></span>
<span id="cb45-2"><a href="how-to-manage-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">log</span>(x)</span>
<span id="cb45-3"><a href="how-to-manage-data.html#cb45-3" aria-hidden="true" tabindex="-1"></a>x2</span></code></pre></div>
<pre><code>## [1] -2.216407397 -1.024432890 -0.462035460 -0.004008021 -0.663588378 -1.951928221 -4.074541935 -0.187535124 -0.097612829</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="how-to-manage-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute the lagged and iterated differences (see `diff()`)</span></span>
<span id="cb47-2"><a href="how-to-manage-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">diff</span>(x2)</span>
<span id="cb47-3"><a href="how-to-manage-data.html#cb47-3" aria-hidden="true" tabindex="-1"></a>x3</span></code></pre></div>
<pre><code>## [1]  1.19197451  0.56239743  0.45802744 -0.65958036 -1.28833984 -2.12261371  3.88700681  0.08992229</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="how-to-manage-data.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Make yourself familiar with the functions round() and round the result (1 digit)</span></span>
<span id="cb49-2"><a href="how-to-manage-data.html#cb49-2" aria-hidden="true" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">round</span>(x3, <span class="dv">1</span>)</span>
<span id="cb49-3"><a href="how-to-manage-data.html#cb49-3" aria-hidden="true" tabindex="-1"></a>x4</span></code></pre></div>
<pre><code>## [1]  1.2  0.6  0.5 -0.7 -1.3 -2.1  3.9  0.1</code></pre>
<p>That is rather long and we actually don’t need objects x2, x3, and x4. Well, then let us write that in a nested function:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="how-to-manage-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.109</span>, <span class="fl">0.359</span>, <span class="fl">0.63</span>, <span class="fl">0.996</span>, <span class="fl">0.515</span>, <span class="fl">0.142</span>, <span class="fl">0.017</span>, <span class="fl">0.829</span>, <span class="fl">0.907</span>)</span>
<span id="cb51-2"><a href="how-to-manage-data.html#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="how-to-manage-data.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">diff</span>(<span class="fu">log</span>(x)), <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1]  1.2  0.6  0.5 -0.7 -1.3 -2.1  3.9  0.1</code></pre>
<p>This is short but you easily loose overview. The solution is the <em>pipe</em>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="how-to-manage-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load one of these packages: `magrittr` or `tidyverse`</span></span>
<span id="cb53-2"><a href="how-to-manage-data.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb53-3"><a href="how-to-manage-data.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="how-to-manage-data.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the same computations on `x` as above</span></span>
<span id="cb53-5"><a href="how-to-manage-data.html#cb53-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">log</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-6"><a href="how-to-manage-data.html#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">diff</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-7"><a href="how-to-manage-data.html#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1]  1.2  0.6  0.5 -0.7 -1.3 -2.1  3.9  0.1</code></pre>
<p>You can read the %&gt;% with “and then” because it takes the results of some function “and then” does something with that in the next.
Another example can be found in this short clip: <a href="https://youtu.be/PX5NuteZ3Vg">Using the pipe operator in R</a></p>
<p>Read out loud the following code:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="how-to-manage-data.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;datasets&quot;</span>)</span>
<span id="cb55-2"><a href="how-to-manage-data.html#cb55-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="how-to-manage-data.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(Sepal.Length <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="how-to-manage-data.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate</span>(. <span class="sc">~</span> Species , . , mean)</span></code></pre></div>
<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa     5.313636    3.713636     1.509091   0.2772727
## 2 versicolor     5.997872    2.804255     4.317021   1.3468085
## 3  virginica     6.622449    2.983673     5.573469   2.0326531</code></pre>
<p>A solution may be the following: “you take the Iris data <em>and then</em> you subset the data <em>and then</em> you aggregate the data and show the mean”.</p>
</div>
<div id="data-manipulation-with-dplyr" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Data manipulation with dplyr<a href="how-to-manage-data.html#data-manipulation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The dplyr package, which is part of tidyverse, make data manipulation easy:
- Pick observations by their values (<code>filter()</code>).
- Reorder the rows (<code>arrange()</code>).
- Pick variables by their names (<code>select()</code>).
- Create new variables with functions of existing variables
(<code>mutate()</code>).
- Collapse many values down to a single summary (<code>summarise()</code>).</p>
<p>These functions can all be used in conjunction with <code>group_by()</code> , which changes the scope of each function from operating on the entire dataset to operating on it group-by-group.</p>
<p>All functions work similarly:
1. The first argument is a data frame.
2. The subsequent arguments describe what to do with the data frame.
3. The result is a new data frame.</p>
<div class="exercise">
<p><span id="exr:subsetting" class="exercise"><strong>Exercise 4.1  </strong></span>Subsetting</p>
<ol style="list-style-type: decimal">
<li>Check to see if you have the mtcars dataset by entering the command mtcars.</li>
<li>Save the mtcars dataset in an object named cars.</li>
<li>What class is cars?</li>
<li>How many observations (rows) and variables (columns) are in the mtcars dataset?</li>
<li>Rename mpg in cars to MPG. Use rename().</li>
<li>Convert the column names of cars to all upper case. Use rename_all, and the toupper command.</li>
<li>Convert the rownames of cars to a column called car using rownames_to_column.</li>
<li>Subset the columns from cars that end in “p” and call it pvars using ends_with().</li>
<li>Create a subset cars that only contains the columns: wt, qsec, and hp and assign this object to carsSub. (Use select().)</li>
<li>What are the dimensions of carsSub? (Use dim().)</li>
<li>Convert the column names of carsSub to all upper case. Use rename_all(), and toupper() (or colnames()).</li>
<li>Subset the rows of cars that get more than 20 miles per gallon (mpg) of fuel efficiency. How many are there? (Use filter().)</li>
<li>Subset the rows that get less than 16 miles per gallon (mpg) of fuel efficiency and have more than 100 horsepower (hp). How many are there? (Use filter() and the pipe operator.)</li>
<li>Create a subset of the cars data that only contains the columns: wt, qsec, and hp for cars with 8 cylinders (cyl) and reassign this object to carsSub. What are the dimensions of this dataset? Do not use the pipe operator.</li>
<li>Create a subset of the cars data that only contains the columns: wt, qsec, and hp for cars with 8 cylinders (cyl) and reassign this object to carsSub2. Use the pipe operator.</li>
<li>Re-order the rows of carsSub by weight (wt) in increasing order. (Use arrange().)</li>
<li>Create a new variable in carsSub called wt2, which is equal to wt^2, using mutate() and piping %&gt;%.</li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_subset.R">here</a>.</p>
</div>
<p>Solutions</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>CRAN is a network of ftp and web servers around the world that store identical, up-to-date, versions of code and documentation for R, see: <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a>.<a href="how-to-manage-data.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="how-to-work-with-r-scripts.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="how-to-visualize-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
