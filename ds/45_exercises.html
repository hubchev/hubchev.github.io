<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>How to Use R for Data Science - 6&nbsp; Collection of exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./40_manage.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./45_exercises.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Collection of exercises</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Collection of exercises</span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./fig/cover_transparent.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">How to Use R for Data Science</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="./How-to-Use-R-for-Data-Science.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting started with R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_swirl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">An interactive introduction using swirl</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_script.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Work with R scripts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualizing data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./40_manage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manage data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./45_exercises.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Collection of exercises</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./95_filesys.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Helpful shortcuts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./951_troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Troubleshooting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./952_operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Operators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./953_popfunctions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Popular functions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#links-to-the-r-scripts-with-the-solutions" id="toc-links-to-the-r-scripts-with-the-solutions" class="nav-link active" data-scroll-target="#links-to-the-r-scripts-with-the-solutions"><span class="header-section-number">6.1</span> Links to the R scripts with the solutions</a></li>
  <li><a href="#links-to-the-output-of-the-scripts" id="toc-links-to-the-output-of-the-scripts" class="nav-link" data-scroll-target="#links-to-the-output-of-the-scripts"><span class="header-section-number">6.2</span> Links to the output of the scripts</a></li>
  <li><a href="#exercise-generate-and-drop-variables" id="toc-exercise-generate-and-drop-variables" class="nav-link" data-scroll-target="#exercise-generate-and-drop-variables"><em>EXERCISE:</em> Generate and drop variables</a></li>
  <li><a href="#exercise-import-data" id="toc-exercise-import-data" class="nav-link" data-scroll-target="#exercise-import-data"><em>EXERCISE:</em> Import data</a></li>
  <li><a href="#exercise-base-r-or-pipe" id="toc-exercise-base-r-or-pipe" class="nav-link" data-scroll-target="#exercise-base-r-or-pipe"><em>EXERCISE:</em> Base R or pipe</a></li>
  <li><a href="#exercise-subsetting" id="toc-exercise-subsetting" class="nav-link" data-scroll-target="#exercise-subsetting"><em>EXERCISE:</em> Subsetting</a></li>
  <li><a href="#exercise-data-transformation" id="toc-exercise-data-transformation" class="nav-link" data-scroll-target="#exercise-data-transformation"><em>EXERCISE:</em> Data transformation</a></li>
  <li><a href="#exercise-load-the-stata-dataset-auto-using-r" id="toc-exercise-load-the-stata-dataset-auto-using-r" class="nav-link" data-scroll-target="#exercise-load-the-stata-dataset-auto-using-r"><em>EXERCISE:</em> Load the Stata dataset “auto” using R</a></li>
  <li><a href="#exercise-datasaurus" id="toc-exercise-datasaurus" class="nav-link" data-scroll-target="#exercise-datasaurus"><em>EXERCISE:</em> DatasauRus</a></li>
  <li><a href="#exercise-convergence" id="toc-exercise-convergence" class="nav-link" data-scroll-target="#exercise-convergence"><em>EXERCISE:</em> Convergence</a></li>
  <li><a href="#exercise-unemployment-and-gdp-in-germany-and-france" id="toc-exercise-unemployment-and-gdp-in-germany-and-france" class="nav-link" data-scroll-target="#exercise-unemployment-and-gdp-in-germany-and-france"><em>EXERCISE:</em> Unemployment and GDP in Germany and France</a></li>
  <li><a href="#exercise-import-data-and-write-a-report" id="toc-exercise-import-data-and-write-a-report" class="nav-link" data-scroll-target="#exercise-import-data-and-write-a-report"><em>EXERCISE:</em> Import data and write a report</a></li>
  <li><a href="#exercise-explain-the-weight" id="toc-exercise-explain-the-weight" class="nav-link" data-scroll-target="#exercise-explain-the-weight"><em>EXERCISE:</em> Explain the weight</a></li>
  <li><a href="#exercise-calories-and-weight" id="toc-exercise-calories-and-weight" class="nav-link" data-scroll-target="#exercise-calories-and-weight"><em>EXERCISE:</em> Calories and weight</a></li>
  <li><a href="#exercise-bundesliga" id="toc-exercise-bundesliga" class="nav-link" data-scroll-target="#exercise-bundesliga"><em>EXERCISE:</em> Bundesliga</a></li>
  <li><a href="#exercise-okuns-law" id="toc-exercise-okuns-law" class="nav-link" data-scroll-target="#exercise-okuns-law"><em>EXERCISE:</em> Okun’s Law</a></li>
  <li><a href="#exercise-names-and-duplicates" id="toc-exercise-names-and-duplicates" class="nav-link" data-scroll-target="#exercise-names-and-duplicates"><em>EXERCISE:</em> Names and duplicates</a></li>
  <li><a href="#exercise-zipfs-law" id="toc-exercise-zipfs-law" class="nav-link" data-scroll-target="#exercise-zipfs-law"><em>EXERCISE:</em> Zipf’s law</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="links-to-the-r-scripts-with-the-solutions" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="links-to-the-r-scripts-with-the-solutions"><span class="header-section-number">6.1</span> Links to the R scripts with the solutions</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_duplicates.R">exe_duplicates.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_import_covid.R">exe_import_covid.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_genanddrop.R">exe_genanddrop.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_base_pipe.R">exe_base_pipe.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_subset.R">exe_subset.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_data_transformation.R">exe_data_transformation.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_poser.R">exe_poser.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_datasauRus.R">exe_datasauRus.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_convergence.R">exe_convergence.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_un_gdp_ger_fra.R">exe_un_gdp_ger_fra.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_hortacsu_figure_3.R">exe_hortacsu_figure_3.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_regress_lecture.R">exe_regress_lecture.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_calories.R">exe_calories.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_bundesliga.R">exe_bundesliga.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_okun_solution.R">exe_okun_solution.R</a></li>
<li><a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_zipf_solution.R">exe_zipf_solution.R</a></li>
</ul>
</section>
<section id="links-to-the-output-of-the-scripts" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="links-to-the-output-of-the-scripts"><span class="header-section-number">6.2</span> Links to the output of the scripts</h2>
<p><a href="https://hubchev.github.io/ds/solutions/exe_solutions.html">Here you find the output</a></p>
</section>
<section id="exercise-generate-and-drop-variables" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-generate-and-drop-variables"><em>EXERCISE:</em> Generate and drop variables</h2>
<p>Use the <em>mtcars</em> dataset. It is part of the package <em>datasets</em> and can be called with</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="a">
<li><p>Create a new tibble called <code>mtcars_new</code> using the pipe operator |&gt;. Generate a new dummy variable called <code>d_cyl_6to8</code> that takes the value 1 if the number of cylinders (cyl) is greater than 6, and 0 otherwise. Do all of this in a single pipe.</p></li>
<li><p>Generate a new dummy variable called <code>posercar</code> that takes a value of 1 if a car has more than 6 cylinders (cyl) and can drive less than 18 miles per gallon (mpg), and 0 otherwise. Add this variable to the tibble <code>mtcars_new</code>.</p></li>
<li><p>Remove the variable <code>d_cyl_6to8</code> from the data frame.</p></li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_genanddrop.R">here</a>.</p>
</section>
<section id="exercise-import-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-import-data"><em>EXERCISE:</em> Import data</h2>
<p><a href="#tbl-covid" class="quarto-xref">Table&nbsp;<span>6.1</span></a> shows COVID for three states in Germany:</p>
<div id="tbl-covid" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-covid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;6.1: Covid cases and deaths till August 2022
</figcaption>
<div aria-describedby="tbl-covid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 24%">
<col style="width: 13%">
<col style="width: 34%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>state</th>
<th>Bavaria</th>
<th>North Rhine-Westphalia</th>
<th>Baden-Württemberg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>deaths (in mio)</td>
<td>4,92M</td>
<td>5,32M</td>
<td>3,69M</td>
</tr>
<tr class="even">
<td>cases</td>
<td>24.111</td>
<td>25.466</td>
<td>16.145</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Write down the code you would need to put into the R-console…</p>
<ul>
<li>…to store each of variables <em>state</em> and <em>deaths</em> in a vector.</li>
<li>…to store both vectors in a data frame with the name <code>df_covid</code>.</li>
<li>…to store both vectors in a tibble with the name <code>tbl_covid</code>.</li>
</ul>
<p>Please find solution to the exercise <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/import_covid_data.R">here</a></p>
</section>
<section id="exercise-base-r-or-pipe" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-base-r-or-pipe"><em>EXERCISE:</em> Base R or pipe</h2>
<ol type="a">
<li>Using the mtcars dataset, write code to create a new dataframe that includes only the rows where the number of cylinders is either 4 or 6, and the weight (wt) is less than 3.5.</li>
</ol>
<p>Do this in two different ways using:</p>
<ol type="1">
<li>The <code>%in%</code> operator and the pipe |&gt; .</li>
<li>Base R without the pipe |&gt;.</li>
</ol>
<p>Compare the resulting dataframes using the identical() function.</p>
<ol start="2" type="a">
<li>Using the mtcars dataset, generate a logical variable that indicates with <code>TRUE</code> all cars with either 4 or 6 cylinders that wt is less than 3.5 and add this variable to a new dataset.</li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_base_pipe.R">here</a>.</p>
</section>
<section id="exercise-subsetting" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-subsetting"><em>EXERCISE:</em> Subsetting</h2>
<ol type="1">
<li>Check to see if you have the mtcars dataset by entering the command mtcars.</li>
<li>Save the mtcars dataset in an object named cars.</li>
<li>What class is cars?</li>
<li>How many observations (rows) and variables (columns) are in the mtcars dataset?</li>
<li>Rename mpg in cars to MPG. Use rename().</li>
<li>Convert the column names of cars to all upper case. Use rename_all, and the toupper command.</li>
<li>Convert the rownames of cars to a column called car using rownames_to_column.</li>
<li>Subset the columns from cars that end in “p” and call it pvars using ends_with().</li>
<li>Create a subset cars that only contains the columns: wt, qsec, and hp and assign this object to carsSub. (Use select().)</li>
<li>What are the dimensions of carsSub? (Use dim().)</li>
<li>Convert the column names of carsSub to all upper case. Use rename_all(), and toupper() (or colnames()).</li>
<li>Subset the rows of cars that get more than 20 miles per gallon (mpg) of fuel efficiency. How many are there? (Use filter().)</li>
<li>Subset the rows that get less than 16 miles per gallon (mpg) of fuel efficiency and have more than 100 horsepower (hp). How many are there? (Use filter() and the pipe operator.)</li>
<li>Create a subset of the cars data that only contains the columns: wt, qsec, and hp for cars with 8 cylinders (cyl) and reassign this object to carsSub. What are the dimensions of this dataset? Do not use the pipe operator.</li>
<li>Create a subset of the cars data that only contains the columns: wt, qsec, and hp for cars with 8 cylinders (cyl) and reassign this object to carsSub2. Use the pipe operator.</li>
<li>Re-order the rows of carsSub by weight (wt) in increasing order. (Use arrange().)</li>
<li>Create a new variable in carsSub called wt2, which is equal to wt^2, using mutate() and piping <code>%&gt;%</code>.</li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_subset.R">here</a>.</p>
</section>
<section id="exercise-data-transformation" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-data-transformation"><em>EXERCISE:</em> Data transformation</h2>
<p>Please download and open the R-script you find <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/data_transformation.R">here</a> and try to answer the questions therein.</p>
<p>Solutions to the questions are linked in the script.</p>
</section>
<section id="exercise-load-the-stata-dataset-auto-using-r" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-load-the-stata-dataset-auto-using-r"><em>EXERCISE:</em> Load the Stata dataset “auto” using R</h2>
<ol type="1">
<li><p>Create a scatter plot illustrating the relationship between the price and weight of a car. Provide a meaningful title for the graph and try to make it clear which car each observation corresponds to.</p></li>
<li><p>Save this graph in the formats of .png and .pdf.</p></li>
<li><p>Create a variable “`lp100km’” that indicates the fuel consumption of an average car in liters per 100 kilometers. (Note: One gallon is approximately equal to 3.8 liters, and one mile is about 1.6 kilometers.)</p></li>
<li><p>Create a dummy variable “`larger6000’” that is equal to 1 if the price of a car is above $6000.</p></li>
<li><p>Now, search for the “most unreasonable poser car” that costs no more than $6000. A “poser” car is defined as one that is expensive, has a large turning radius, consumes a lot of fuel, and is often defective (rep78 is low). For this purpose, create a metric indicator for each corresponding variable that indicates a value of 1 for the car that is the most unreasonable in that variable and 0 for the most reasonable car. All other cars should fall between 0 and 1.</p></li>
</ol>
<p>Please find the solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_poser.R">here</a>.</p>
</section>
<section id="exercise-datasaurus" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-datasaurus"><em>EXERCISE:</em> DatasauRus</h2>
<div id="fig-label" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-label-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: The logo of the DatasauRus package
</figcaption>
<div aria-describedby="fig-label-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<p><a href="fig/datasaurus.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1"><img src="fig/datasaurus.png" class="img-fluid figure-img" style="width:25.0%"></a></p>
<p>Source: https://github.com/jumpingrivers/datasauRus_</p>
</div>
</figure>
</div>
<ol type="a">
<li><p>Load the packages <code>datasauRus</code> and <code>tidyverse</code>. If necessary, install these packages.</p></li>
<li><p>The package<code>datasauRus</code> comes with a dataset in two different formats: <code>datasaurus_dozen</code> and <code>datasaurus_dozen_wide</code>. Store them as <code>ds</code> and <code>ds_wide</code>.</p></li>
<li><p>Open and read the R vignette of the <code>datasauRus</code> package. Also open the R documentation of the dataset <code>datasaurus_dozen</code>.</p></li>
<li><p>Explore the dataset: What are the dimensions of this dataset? Look at the descriptive statistics.</p></li>
<li><p>How many unique values does the variable <code>dataset</code> of the tibble <code>ds</code> have? Hint: The function unique() return the unique values of a variable and the function length() returns the length of a vector, such as the unique elements.</p></li>
<li><p>Compute the mean values of the <code>x</code> and <code>y</code> variables for each entry in <code>dataset</code>. Hint: Use the group_by() function to group the data by the appropriate column and then the summarise() function to calculate the mean.</p></li>
<li><p>Compute the standard deviation, the correlation, and the median in the same way. Round the numbers.</p></li>
<li><p>What can you conclude?</p></li>
<li><p>Plot all datasets of <code>ds</code>. Hide the legend. Hint: Use the <code>facet_wrap()</code> and the <code>theme()</code> function.</p></li>
<li><p>Create a loop that generates separate scatter plots for each unique datatset of the tibble <code>ds</code>. Export each graph as a png file.</p></li>
<li><p>Watch the video <a href="https://youtu.be/T-kxUB29t0o">Animating the Datasaurus Dozen Dataset in R</a> from The Data Digest on YouTube.</p></li>
</ol>
<p>Please find the solutions <a href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/hubchev/hubchev.github.io/main/various/datasaurus_solution.html">here</a>.</p>
</section>
<section id="exercise-convergence" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-convergence"><em>EXERCISE:</em> Convergence</h2>
<p>The dataset convergence.dta, see https://github.com/hubchev/courses/blob/main/dta/convergence.dta, contains the per capita GDP of 1960 (gdppc60) and the average growth rate of GDP per capita between 1960 and 1995 (growth) for different countries (country), as well as 3 dummy variables indicating the belonging of a country to the region Asia (asia), Western Europe (weurope) or Africa (africa).</p>
<ul>
<li>Some countries are not assigned to a certain country group. Name the countries which are assign to be part of Western Europe, Africa or Asia. If you find countries that are members of the EU, assign them a ‘1’ in the variable weurope.</li>
<li>Create a table that shows the average GDP per capita for all available points in time. Group by Western European, Asian, African, and the remaining countries.</li>
<li>Create the growth rate of GDP per capita from 1960 to 1995 and call it gdpgrowth. (Note: The log value X minus the log value X of the previous period is approximately equal to the growth rate).</li>
<li>Calculate the unconditional convergence of all countries by constructing a graph in which a scatterplot shows the GDP per capita growth rate between 1960 and 1995 (gdpgrowth) on the y-axis and the 1960 GDP per capita (gdppc60) on the x-axis. Add to the same graph the estimated linear relationship. You do not need to label the graph further, just two things: title the graph <code>world</code> and label the individual observations with the country names.</li>
<li>Create three graphs describing the same relationship for the sample of Western European, African and Asian countries. Title the graph accordingly with <code>weurope</code>, <code>africa</code> and <code>asia</code>.</li>
<li>Combine the four graphs into one image. Discuss how an upward or downward sloping regression line can be interpreted.</li>
<li>Estimate the relationships illustrated in the 4 graphs using the least squares method. Present the 4 estimation results in a table, indicating the significance level with stars. In addition, the Akaike information criterion, and the number of observations should be displayed in the table. Interpret the four estimation results regarding their significance.</li>
<li>Put the data set into the so-called long format and calculate the GDP per capita growth rates for the available time points in the countries.</li>
</ul>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_convergence.R">here</a>.</p>
</section>
<section id="exercise-unemployment-and-gdp-in-germany-and-france" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-unemployment-and-gdp-in-germany-and-france"><em>EXERCISE:</em> Unemployment and GDP in Germany and France</h2>
<p>The following exercise was a former exam.</p>
<p>Please answer all (!) questions in an R script. Normal text should be written as comments, using the ‘#’ to comment out text. Make sure the script runs without errors before submitting it. Each task (starting with 1) is worth five points. You have a total of 120 minutes of editing time. Please do not forget to number your answers.</p>
<p>When you are done with your work, save the R script, export the script to pdf format and upload the pdf file.</p>
<p>Suppose you aim to empirically examine unemployment and GDP for Germany and France. The data set that we use in the following is ‘forest.Rdata’.</p>
<ol start="0" type="1">
<li><p>Write down your name, matriculation number, and date.</p></li>
<li><p>Set your working directory.</p></li>
</ol>
<ol start="2" type="1">
<li>Clear your global environment.</li>
</ol>
<ol start="3" type="1">
<li>Install and load the following packages: ‘tidyverse’, ‘sjPlot’, and ‘ggpubr’</li>
</ol>
<ol start="4" type="1">
<li>Download and load the data, respectively, with the following code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/hubchev/courses/raw/main/dta/forest.Rdata"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If that is not working, you can also download the data from ILIAS, save it in your working directory and load it from there with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load("forest.Rdata")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><p>Show the <strong>first eight</strong> observations of the dataset ‘df’.</p></li>
<li><p>Show the <strong>last observation</strong> of the dataset ‘df’.</p></li>
<li><p>Which type of data do we have here (Panel, cross-section,time series, …)? Name the variable(s) that are necessary to identify the observations in the dataset.</p></li>
<li><p>Explain what the <strong>assignment operator</strong> in R is and what it is good for.</p></li>
<li><p>Write down the R code to store the number of observations and the number of variables that are in the dataset ‘df’. Name the object in which you store these numbers ‘observations_df’.</p></li>
<li><p>In the dataset ‘df’, rename the variable ‘country.x’ to ‘nation’ and the variable ‘date’ to ‘year’.</p></li>
<li><p>Explain what the <strong>pipe operator</strong> in R is and what it is good for.</p></li>
<li><p>For the upcoming analysis you are only interested the following <strong>variables</strong> that are part of the dataframe ‘df’: nation, year, gdp, pop, gdppc, and unemployment. Drop all other variables from the dataframe ‘df’.</p></li>
<li><p>Create a variable that indicates the GDP per capita (‘gdp’ divided by ‘pop’). Name the variable ‘gdp_pc’. (Hint: If you fail here, use the variable ‘gdppc’ which is already in the dataset as a replacement for ‘gdp_pc’ in the following tasks.)</p></li>
<li><p>For the upcoming analysis you are only interested the following <strong>countries</strong> that are part of the dataframe ‘df’: Germany and France. Drop all other countries from the dataframe ‘df’.</p></li>
<li><p>Create a table showing the <strong>average</strong> unemployment rate and GDP per capita for Germany and France in the given years. Use the pipe operator. (Hint: See below for how your results should look like.)</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `mean(unemployment)` `mean(gdppc)`
  &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
1 France                  9.75        34356.
2 Germany                 7.22        36739.</code></pre>
</div>
</div>
<ol start="16" type="1">
<li>Create a table showing the unemployment rate and GDP per capita for Germany and France in the <strong>year 2020</strong>. Use the pipe operator. (Hint: See below for how your results should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `mean(unemployment)` `mean(gdppc)`
  &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
1 France                  8.01        35786.
2 Germany                 3.81        41315.</code></pre>
</div>
</div>
<ol start="17" type="1">
<li>Create a table showing the <strong>highest</strong> unemployment rate and the <strong>highest</strong> GDP per capita for Germany and France during the given period. Use the pipe operator. (Hint: See below for how your results should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `max(unemployment)` `max(gdppc)`
  &lt;chr&gt;                 &lt;dbl&gt;        &lt;dbl&gt;
1 France                 12.6       38912.
2 Germany                11.2       43329.</code></pre>
</div>
</div>
<ol start="18" type="1">
<li>Calculate the standard deviation of the unemployment rate and GDP per capita for Germany and France in the given years. (Hint: See below for how your result should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `sd(gdppc)` `sd(unemployment)`
  &lt;chr&gt;         &lt;dbl&gt;              &lt;dbl&gt;
1 France        2940.               1.58
2 Germany       4015.               2.37</code></pre>
</div>
</div>
<ol start="19" type="1">
<li>In statistics, the coefficient of variation (COV) is a standardized measure of dispersion. It is defined as the ratio of the standard deviation (<span class="math inline">\(\sigma\)</span>) to the mean (<span class="math inline">\(\mu\)</span>): <span class="math inline">\(COV={\frac {\sigma }{\mu }}\)</span>. Write down the R code to calculate the coefficient of variation (COV) for the <strong>unemployment rate</strong> in Germany and France. (Hint: See below for what your result should should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  nation  `sd(unemployment)` `mean(unemployment)`   cov
  &lt;chr&gt;                &lt;dbl&gt;                &lt;dbl&gt; &lt;dbl&gt;
1 France                1.58                 9.75 0.162
2 Germany               2.37                 7.22 0.328</code></pre>
</div>
</div>
<ol start="20" type="1">
<li>Write down the R code to calculate the coefficient of variation (COV) for the <strong>GDP per capita</strong> in Germany and France. (Hint: See below for what your result should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  nation  `sd(gdppc)` `mean(gdppc)`    cov
  &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
1 France        2940.        34356. 0.0856
2 Germany       4015.        36739. 0.109 </code></pre>
</div>
</div>
<ol start="21" type="1">
<li>Create a chart (bar chart, line chart, or scatter plot) that shows the unemployment rate of <strong>Germany</strong> over the available years. Label the chart ‘Germany’ with ‘ggtitle(“Germany”)’. Please note that you may choose any type of graphical representation. (Hint: Below you can see one of many |&gt; of what your result may look like).</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="45_exercises_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="22" type="1">
<li>and 23. <em>(This task is worth 10 points)</em> The following chart shows the simultaneous development of the unemployment rate and GDP per capita over time for <strong>France</strong>.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-33-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="45_exercises_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Suppose you want to visualize the simultaneous evolution of the unemployment rate and GDP per capita over time for Germany as well.<br>
Suppose further that you have found the following lines of code that create the kind of chart you are looking for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">13</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">22</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="dv">1970</span><span class="sc">:</span><span class="dv">1978</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Connected scatter plot with text</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">xlab =</span> <span class="st">"Var 1"</span>, <span class="at">ylab =</span> <span class="st">"Var 2"</span>); <span class="fu">text</span>(x <span class="sc">+</span> <span class="fl">0.4</span>, y <span class="sc">+</span> <span class="fl">0.1</span>, labels) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-34-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="45_exercises_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Use these lines of code and customize them to create the co-movement visualization for <strong>Germany</strong> using the available ‘df’ data. The result should look something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-35-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="45_exercises_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="24" type="1">
<li>Interpret the two graphs above, which show the simultaneous evolution of the unemployment rate and GDP per capita over time for Germany and France. What are your expectations regarding the correlation between the unemployment rate and GDP per capita variables? Can you see this expectation in the figures? Discuss.</li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_un_gdp_ger_fra.R">here</a>.</p>
</section>
<section id="exercise-import-data-and-write-a-report" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-import-data-and-write-a-report"><em>EXERCISE:</em> Import data and write a report</h2>
<p>Reproduce Figure 3 of <span class="citation" data-cites="Hortacsu2015Ongoing">Hortaçsu &amp; Syverson (<a href="references.html#ref-Hortacsu2015Ongoing" role="doc-biblioref">2015, p. 99</a>)</span> using R. Write a clear report about your work, i.e., document everything with a R script or a R Markdown file.</p>
<p>Here are the required steps:</p>
<ol type="1">
<li>Go to <a href="https://www.aeaweb.org/articles?id=10.1257/jep.29.4.89" class="uri">https://www.aeaweb.org/articles?id=10.1257/jep.29.4.89</a> and download the <em>replication package</em> from the <em>OPENICPSR</em> page. Please note, that you can download the replication package after you have registered for the platform.</li>
<li>Unzip the replication package.</li>
<li>In the file <em>diffusion_curves_figure.xlsx</em> you find the required data. Import them to R.</li>
<li>Reproduce the plot using ggplot().</li>
</ol>
<p>Please find solutions <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_hortacsu_figure_3.R">here</a>.</p>
</section>
<section id="exercise-explain-the-weight" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-explain-the-weight"><em>EXERCISE:</em> Explain the weight</h2>
<p>In the statistic course of WS 2020, I asked 23 students about their weight, height, sex, and number of siblings. I wonder how good the height can explain the weight of students. Examine with corelations and a regression analysis the association. Load the data as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"haven"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>classdata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://raw.githubusercontent.com/hubchev/courses/main/dta/classdata.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A sketch of a solution is provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_regress_lecture.R">here</a>.</p>
</section>
<section id="exercise-calories-and-weight" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-calories-and-weight"><em>EXERCISE:</em> Calories and weight</h2>
<ol type="a">
<li>Write down your name, your matriculation number, and the date.</li>
<li>Set your working directory.</li>
<li>Clear your global environment.</li>
<li>Load the following package: <code>tidyverse</code></li>
</ol>
<p>The following table stems from a survey carried out at the Campus of the German Sport University of Cologne at Opening Day (first day of the new semester) between 8:00am and 8:20am. The survey consists of 6 individuals with the following information:</p>
<table class="table">
<thead>
<tr class="header">
<th>id</th>
<th>sex</th>
<th>age</th>
<th>weight</th>
<th>calories</th>
<th>sport</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>f</td>
<td>21</td>
<td>48</td>
<td>1700</td>
<td>60</td>
</tr>
<tr class="even">
<td>2</td>
<td>f</td>
<td>19</td>
<td>55</td>
<td>1800</td>
<td>120</td>
</tr>
<tr class="odd">
<td>3</td>
<td>f</td>
<td>23</td>
<td>50</td>
<td>2300</td>
<td>180</td>
</tr>
<tr class="even">
<td>4</td>
<td>m</td>
<td>18</td>
<td>71</td>
<td>2000</td>
<td>60</td>
</tr>
<tr class="odd">
<td>5</td>
<td>m</td>
<td>20</td>
<td>77</td>
<td>2800</td>
<td>240</td>
</tr>
<tr class="even">
<td>6</td>
<td>m</td>
<td>61</td>
<td>85</td>
<td>2500</td>
<td>30</td>
</tr>
</tbody>
</table>
<p>Data Description:</p>
<ul>
<li><strong>id:</strong> Variable with an anonymized identifier for each participant.</li>
<li><strong>sex:</strong> Gender, i.e., the participants replied to be either male (m) or female (f).</li>
<li><strong>age:</strong> The age in years of the participants at the time of the survey.</li>
<li><strong>weight:</strong> Number of kg the participants pretended to weight.</li>
<li><strong>calories:</strong> Estimate of the participants on their average daily consumption of calories.</li>
<li><strong>sport:</strong> Estimate of the participants on their average daily time that they spend on doing sports (measured in minutes).</li>
</ul>
<ol start="5" type="a">
<li>Which type of data do we have here? (Panel data, repeated cross-sectional data, cross-sectional data, time Series data)</li>
<li>Store each of the five variables in a vector and put all five variables into a dataframe with the title <code>df</code>. If you fail here, read in the data using this line of code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/hubchev/courses/main/dta/df-calories.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): sex
dbl (4): age, weight, calories, sport

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<ol start="7" type="a">
<li><p>Show for all numerical variables the summary statistics including the mean, median, minimum, and the maximum.</p></li>
<li><p>Show for all numerical variables the summary statistics including the mean and the standard deviation, <strong>separated by male and female</strong>. Use therefore the pipe operator.</p></li>
<li><p>Suppose you want to analyze the general impact of average calories consumption per day on the weight. Discuss if the sample design is appropriate to draw conclusions on the population. What may cause some bias in the data? Discuss possibilities to improve the sampling and the survey, respectively.</p></li>
<li><p>The following plot visualizes the two variables weight and calories. Discuss what can be improved in the graphical visualization.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Weight vs.&nbsp;Calories</figcaption>
<p><a href="fig/sport-r.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6" title="Weight vs.&nbsp;Calories"><img src="fig/sport-r.png" class="img-fluid figure-img" style="width:40.0%" alt="Weight vs.&nbsp;Calories"></a></p>
</figure>
</div>
<ol start="11" type="a">
<li><p>Make a scatterplot matrix containing all numerical variables.</p></li>
<li><p>Calculate the Pearson Correlation Coefficient of the two variables</p>
<ol type="1">
<li><code>calories</code> and <code>sport</code></li>
<li><code>weight</code> and <code>calories</code></li>
</ol></li>
<li><p>Make a scatterplot with <code>weight</code> in the y-axis and <code>calories</code> on the x-axis. Additionally, the plot should contain a linear fit and the points should be labeled with the <code>sex</code> just like in the figure shown above.</p></li>
<li><p>Estimate the following regression specification using the OLS method: [weight_i=_0+_1 calories_i+ _i]</p></li>
</ol>
<p>Show a summary of the estimates that look like the following:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = weight ~ calories, data = df)

Residuals:
     1      2      3      4      5      6 
-5.490 -1.182 -6.640  9.435 -6.099  9.976 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)  7.730275  20.197867   0.383   0.7214  
calories     0.026917   0.009107   2.956   0.0417 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.68 on 4 degrees of freedom
Multiple R-squared:  0.6859,    Adjusted R-squared:  0.6074 
F-statistic: 8.735 on 1 and 4 DF,  p-value: 0.04174</code></pre>
</div>
</div>
<ol start="15" type="a">
<li><p>Interpret the results. In particular, interpret how many kg the estimated weight increases—on average and ceteris paribus—if calories increase by 100 calories. Additionally, discuss the statistical properties of the estimated coefficient <span class="math inline">\(\hat{\beta_1}\)</span> and the meaning of the <strong>Adjusted R-squared</strong>.</p></li>
<li><p>OLS estimates can suffer from omitted variable bias. State the two conditions that need to be fulfilled for omitted bias to occur.</p></li>
<li><p>Discuss potential confounding variables that may cause omitted variable bias. Given the dataset above how can some of the confounding variables be <em>controlled for</em>?</p></li>
</ol>
<p>Solutions are provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_calories.R">here</a>.</p>
</section>
<section id="exercise-bundesliga" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-bundesliga"><em>EXERCISE:</em> Bundesliga</h2>
<p>Open the script that you find <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/ask_dfb.R">here</a> and work on the following tasks:</p>
<ol type="1">
<li><p>Set your working directory.</p></li>
<li><p>Clear th environment.</p></li>
<li><p>Install and load the <code>bundesligR</code> and <code>tidyverse</code>.</p></li>
<li><p>Read in the data <code>bundesligR</code> as a tibble.</p></li>
<li><p>Replace “Bor. Moenchengladbach” with “Borussia Moenchengladbach.”</p></li>
<li><p>Check for the data class.</p></li>
<li><p>View the data.</p></li>
<li><p>Glimpse on the data.</p></li>
<li><p>Show the first and last observations.</p></li>
<li><p>Show summary statistics to all variables.</p></li>
<li><p>How many teams have played in the league over the years?</p></li>
<li><p>Which teams have played Bundesliga so far?</p></li>
<li><p>How many teams have played Bundesliga?</p></li>
<li><p>How often has each team played in the Bundesliga?</p></li>
<li><p>Show summary statistics of variable <code>Season</code> only.</p></li>
<li><p>Show summary statistics of all numeric variables (<code>Team</code> is a character).</p></li>
<li><p>What is the highest number of points ever received by a team? Show only the name of the club with the highest number of points ever received.</p></li>
<li><p>Create a new tibble using <code>liga</code> removing the variable <code>Pts_pre_95</code> from the data.</p></li>
<li><p>Create a new tibble using <code>liga</code> renaming W, D, and L to Win, Draw, and Loss. Additionally rename GF, GA, GD to Goals_shot, Goals_received, Goal_difference.</p></li>
<li><p>Create a new tibble using <code>liga</code> without the variable <code>Pts_pre_95</code> and only observations before the year 1996.</p></li>
<li><p>Remove the three tibbles just created from the environment.</p></li>
<li><p>Rename all variables of <code>liga</code> to lowercase and store it as <code>dfb</code>.</p></li>
<li><p>Show the winner and the runner up after the year 2010. Additionally show the points received.</p></li>
<li><p>Create a variable that counts how often a team was ranked first.</p></li>
<li><p>How often has each team played in the Bundesliga?</p></li>
<li><p>Make a ranking that shows which team has played the Bundesliga most often.</p></li>
<li><p>Add a variable to <code>dfb</code> that contains the number of appearances of a team in the league.</p></li>
<li><p>Create a number that indicates how often a team has played Bundesliga in a given year.</p></li>
<li><p>Make a ranking with the number of titles of all teams that ever won the league.</p></li>
<li><p>Create a numeric identifying variable for each team.</p></li>
<li><p>When a team is in the league, what is the probability that it wins the league?</p></li>
<li><p>Make a scatterplot with points on the y-axis and position on the x-axis.</p></li>
<li><p>Make a scatterplot with points on the y-axis and position on the x-axis. Additionally, only consider seasons with 18 teams and add lines that make clear how many points you needed to be placed in between rank 2 and 15.</p></li>
<li><p>Remove all objects from the environment except <code>dfb</code> and <code>liga</code>.</p></li>
<li><p>In Figure @ref(fig:fckpic), the ranking history of <em>1. FC Kaiserslautern</em> is shown. Replicate that plot.</p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Ranking history: 1. FC Kaiserslautern</figcaption>
<p><a href="45_exercises_files/figure-html/fckpic-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" data-glightbox="description: .lightbox-desc-7" title="Ranking history: 1. FC Kaiserslautern"><img src="45_exercises_files/figure-html/fckpic-1.png" class="img-fluid figure-img" width="672" alt="Ranking history: 1. FC Kaiserslautern"></a></p>
</figure>
</div>
</div>
</div>
<ol start="34" type="1">
<li>In Figure @ref(fig:efzplot), I made the graph a bit nicer. Can you spot all differences and can you guess what the dashed line and the triangles mean? How could the visualization be improved further? Replicate the plot.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Ranking history: 1. FC Köln</figcaption>
<p><a href="45_exercises_files/figure-html/efzplot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" data-glightbox="description: .lightbox-desc-8" title="Ranking history: 1. FC Köln"><img src="45_exercises_files/figure-html/efzplot-1.png" class="img-fluid figure-img" width="672" alt="Ranking history: 1. FC Köln"></a></p>
</figure>
</div>
</div>
</div>
<ol start="35" type="1">
<li>Try to make the ranking history for each club ever played the league and export the graph as a <code>png</code> file.</li>
</ol>
<p>Solutions are provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_bundesliga.R">here</a>.</p>
</section>
<section id="exercise-okuns-law" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-okuns-law"><em>EXERCISE:</em> Okun’s Law</h2>
<p><em>Suppose you aim to empirically examine unemployment and GDP for Germany and France. The data set that we use in the following is ‘forest.Rdata’ and should already been known to you from the lecture.</em></p>
<ol start="0" type="1">
<li><p>Write down your name, matriculation number, and date.</p></li>
<li><p>Set your working directory.</p></li>
</ol>
<ol start="2" type="1">
<li>Clear your global environment.</li>
</ol>
<ol start="3" type="1">
<li>Install and load the following packages: ‘tidyverse’, ‘sjPlot’, and ‘ggpubr’</li>
</ol>
<ol start="4" type="1">
<li>Download and load the data, respectively, with the following code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/hubchev/courses/raw/main/dta/forest.Rdata"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If that is not working, you can also download the data from ILIAS, save it in your working directory and load it from there with:</p>
<pre><code>load("forest.Rdata")</code></pre>
<ol start="5" type="1">
<li><p>Show the <strong>first eight</strong> observations of the dataset ‘df’.</p></li>
<li><p>Show the <strong>last observation</strong> of the dataset ‘df’.</p></li>
<li><p>Which type of data do we have here (Panel, cross-section,time series, …)? Name the variable(s) that are necessary to identify the observations in the dataset.</p></li>
<li><p>Explain what the <strong>assignment operator</strong> in R is and what it is good for.</p></li>
<li><p>Write down the R code to store the number of observations and the number of variables that are in the dataset ‘df’. Name the object in which you store these numbers ‘observations_df’.</p></li>
<li><p>In the dataset ‘df’, rename the variable ‘country.x’ to ‘nation’ and the variable ‘date’ to ‘year’.</p></li>
<li><p>Explain what the <strong>pipe operator</strong> in R is and what it is good for.</p></li>
<li><p>For the upcoming analysis you are only interested the following <strong>variables</strong> that are part of the dataframe ‘df’: nation, year, gdp, pop, gdppc, and unemployment. Drop all other variables from the dataframe ‘df’.</p></li>
<li><p>Create a variable that indicates the GDP per capita (‘gdp’ divided by ‘pop’). Name the variable ‘gdp_pc’. (Hint: If you fail here, use the variable ‘gdppc’ which is already in the dataset as a replacement for ‘gdp_pc’ in the following tasks.)</p></li>
<li><p>For the upcoming analysis you are only interested the following <strong>countries</strong> that are part of the dataframe ‘df’: Germany and France. Drop all other countries from the dataframe ‘df’.</p></li>
<li><p>Create a table showing the <strong>average</strong> unemployment rate and GDP per capita for Germany and France in the given years. Use the pipe operator. (Hint: See below for how your results should look like.)</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `mean(unemployment)` `mean(gdppc)`
  &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
1 France                  9.75        34356.
2 Germany                 7.22        36739.</code></pre>
</div>
</div>
<ol start="16" type="1">
<li>Create a table showing the unemployment rate and GDP per capita for Germany and France in the <strong>year 2020</strong>. Use the pipe operator. (Hint: See below for how your results should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `mean(unemployment)` `mean(gdppc)`
  &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
1 France                  8.01        35786.
2 Germany                 3.81        41315.</code></pre>
</div>
</div>
<ol start="17" type="1">
<li>Create a table showing the <strong>highest</strong> unemployment rate and the <strong>highest</strong> GDP per capita for Germany and France during the given period. Use the pipe operator. (Hint: See below for how your results should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `max(unemployment)` `max(gdppc)`
  &lt;chr&gt;                 &lt;dbl&gt;        &lt;dbl&gt;
1 France                 12.6       38912.
2 Germany                11.2       43329.</code></pre>
</div>
</div>
<ol start="18" type="1">
<li>Calculate the standard deviation of the unemployment rate and GDP per capita for Germany and France in the given years. (Hint: See below for how your result should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  nation  `sd(gdppc)` `sd(unemployment)`
  &lt;chr&gt;         &lt;dbl&gt;              &lt;dbl&gt;
1 France        2940.               1.58
2 Germany       4015.               2.37</code></pre>
</div>
</div>
<ol start="19" type="1">
<li>In statistics, the coefficient of variation (COV) is a standardized measure of dispersion. It is defined as the ratio of the standard deviation (<span class="math inline">\(\sigma\)</span>) to the mean (<span class="math inline">\(\mu\)</span>): <span class="math inline">\(COV={\frac {\sigma }{\mu }}\)</span>. Write down the R code to calculate the coefficient of variation (COV) for the <strong>unemployment rate</strong> in Germany and France. (Hint: See below for what your result should should look like.)</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  nation  `sd(unemployment)` `mean(unemployment)`   cov
  &lt;chr&gt;                &lt;dbl&gt;                &lt;dbl&gt; &lt;dbl&gt;
1 France                1.58                 9.75 0.162
2 Germany               2.37                 7.22 0.328</code></pre>
</div>
</div>
<ol start="20" type="1">
<li>Write down the R code to calculate the coefficient of variation (COV) for the <strong>GDP per capita</strong> in Germany and France. (Hint: See below for what your result should should look like.)</li>
</ol>
<p>look like.)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  nation  `sd(gdppc)` `mean(gdppc)`    cov
  &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
1 France        2940.        34356. 0.0856
2 Germany       4015.        36739. 0.109 </code></pre>
</div>
</div>
<ol start="21" type="1">
<li>Create a chart (bar chart, line chart, or scatter plot) that shows the unemployment rate of <strong>Germany</strong> over the available years. Label the chart ‘Germany’ with ‘ggtitle(“Germany”)’. Please note that you may choose any type of graphical representation. (Hint: Below you can see one of many possible examples of what your result may look like).</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-60-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="45_exercises_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="22" type="1">
<li>and 23. <em>(This task is worth 10 points)</em> The following chart shows the simultaneous development of the unemployment rate and GDP per capita over time for <strong>France</strong>.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-61-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="45_exercises_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Suppose you want to visualize the simultaneous evolution of the unemployment rate and GDP per capita over time for Germany as well.<br>
Suppose further that you have found the following lines of code that create the kind of chart you are looking for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">13</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">22</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="dv">1970</span><span class="sc">:</span><span class="dv">1978</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Connected scatter plot with text</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">xlab =</span> <span class="st">"Var 1"</span>, <span class="at">ylab =</span> <span class="st">"Var 2"</span>); <span class="fu">text</span>(x <span class="sc">+</span> <span class="fl">0.4</span>, y <span class="sc">+</span> <span class="fl">0.1</span>, labels) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-62-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="45_exercises_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Use these lines of code and customize them to create the co-movement visualization for <strong>Germany</strong> using the available ‘df’ data. The result should look something like this:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-63-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="45_exercises_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="24" type="1">
<li>Interpret the two graphs above, which show the simultaneous evolution of the unemployment rate and GDP per capita over time for Germany and France. What are your expectations regarding the correlation between the unemployment rate and GDP per capita variables? Can you see this expectation in the figures? Discuss.</li>
</ol>
<p>Solutions are provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_okun_solution.R">here</a>.</p>
</section>
<section id="exercise-names-and-duplicates" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-names-and-duplicates"><em>EXERCISE:</em> Names and duplicates</h2>
<ol type="1">
<li>Load the required packages (<code>pacman</code>, <code>tidyverse</code>, <code>janitor</code>, <code>babynames</code>, <code>stringr</code>).</li>
<li>Load the dataset from the URL: <a href="https://github.com/hubchev/courses/raw/main/dta/df_names.RData" class="uri">https://github.com/hubchev/courses/raw/main/dta/df_names.RData</a>. Make yourself familiar with the data.</li>
<li>After loading the dataset, remove all objects except <code>df_2022</code> and <code>df_2022_error</code>.</li>
<li>Reorder the data using the <code>relocate</code> function so that <code>surname</code>, <code>name</code>, and <code>age</code> appear first. Save the changed data in a tibble called <code>df</code>.</li>
<li>Sort the data according to <code>surname</code>, <code>name</code>, and <code>age</code>.</li>
<li>Make a variable named <code>born</code> that contains the year of birth. How is the <code>born</code> variable calculated?</li>
<li>Create a new variable named <code>id</code> that identifies each person by <code>surname</code>, <code>name</code>, and their birth year (<code>born</code>). Why is this identifier useful?</li>
<li>Investigate how the data is identified. Are there any duplicates? If so, can you think of strategies to identify and how to deal with these duplicates.</li>
<li>Unload the packages used in the script. Why is unloading packages considered good practice?</li>
</ol>
<p>Solutions are provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_duplicates.R">here</a>.</p>
</section>
<section id="exercise-zipfs-law" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercise-zipfs-law"><em>EXERCISE:</em> Zipf’s law</h2>
<p>The data under investigation includes population information for various German cities, identified by the variable <code>stadt</code>, spanning the years 1970, 1987, and 2010. The variable status provides details about the legislative status of the cities, and the variable <code>state</code> (Bundesland) indicates the state in which each respective city is situated.</p>
<section id="preamble" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="preamble">Preamble</h3>
<ol type="1">
<li>Set your working directory.</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Clear your global environment.</li>
</ol>
<ol start="3" type="1">
<li>Install and load the following packages: ‘tidyverse’, ‘haven’, and ‘janitor’.</li>
</ol>
</section>
<section id="read-in-inspect-and-clean-the-data" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="read-in-inspect-and-clean-the-data">Read in, inspect, and clean the data</h3>
<ol start="4" type="1">
<li>Download and load the data, respectively, with the following code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://github.com/hubchev/courses/raw/main/dta/city.dta"</span>, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">encoding=</span><span class="st">"latin1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If that is not working, you can also download the data from ILIAS, save it in your working directory and load it from there with:</p>
<pre><code>load("city.RData")</code></pre>
<ol start="5" type="1">
<li><p>Show the first six and the last six observations of the dataset ‘df’.</p></li>
<li><p>How many observations (rows) and variables (columns) are in the dataset?</p></li>
<li><p>Show for all numerical variables the summary statistics including the mean, median, minimum, and the maximum.</p></li>
<li><p>Rename the variable <code>stadt</code> to <code>city</code>.</p></li>
<li><p>Remove the variables <code>pop1970</code> and <code>pop1987</code>.</p></li>
<li><p>Replicate the following table which contains some summary statistics.</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 3
   state                  `mean(pop2011)` `sum(pop2011)`
   &lt;chr&gt;                            &lt;dbl&gt;          &lt;dbl&gt;
 1 Baden-Wrttemberg                 7580            7580
 2 Baden-Württemberg               23680.        7837917
 3 Bayern                          23996.        7558677
 4 Berlin                        3292365         3292365
 5 Brandenburg                     18472.        1865632
 6 Bremen                         325432.         650863
 7 Hamburg                       1706696         1706696
 8 Hessen                          22996.        5036121
 9 Mecklenburg-Vorpommern          27034.         811005
10 Niedersachsen                   24107.        6219515
11 Nordrhein-Westfalen             47465.       18036727
12 Rheinland-Pfalz                 25644.        1871995
13 Saarland                           NA              NA
14 Sachsen                         27788.        2973351
15 Sachsen-Anhalt                  21212.        1993915
16 Schleswig-Holstein              24157.        1739269
17 Th_ringen                       29192.        1167692</code></pre>
</div>
</div>
<ol start="11" type="1">
<li>The states “Baden-Wrttemberg” and “Th_ringen” are falsely pronounced. Correct the names and regenerate the summary statistics table presented above. Your result should look like this:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 3
   state                  `mean(pop2011)` `sum(pop2011)`
   &lt;chr&gt;                            &lt;dbl&gt;          &lt;dbl&gt;
 1 Baden-Württemberg               23631.        7845497
 2 Bayern                          23996.        7558677
 3 Berlin                        3292365         3292365
 4 Brandenburg                     18472.        1865632
 5 Bremen                         325432.         650863
 6 Hamburg                       1706696         1706696
 7 Hessen                          22996.        5036121
 8 Mecklenburg-Vorpommern          27034.         811005
 9 Niedersachsen                   24107.        6219515
10 Nordrhein-Westfalen             47465.       18036727
11 Rheinland-Pfalz                 25644.        1871995
12 Saarland                           NA              NA
13 Sachsen                         27788.        2973351
14 Sachsen-Anhalt                  21212.        1993915
15 Schleswig-Holstein              24157.        1739269
16 Thüringen                       29192.        1167692</code></pre>
</div>
</div>
<ol start="12" type="1">
<li>To investigate the reason for observing only <code>NAs</code> for Saarland, examine all cities within Saarland. Therefore, please display all observations for cities in Saarland in the Console, as illustrated below.</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 5
   city                status  state    pop2011 rankX
   &lt;chr&gt;               &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1 Perl                Commune Saarland    7775  2003
 2 Freisen             Commune Saarland    8270  1894
 3 Großrosseln         Commune Saarland    8403  1868
 4 Nonnweiler          Commune Saarland    8844  1775
 5 Nalbach             Commune Saarland    9302  1678
 6 Wallerfangen        Commune Saarland    9542  1642
 7 Kirkel              Commune Saarland   10058  1541
 8 Merchweiler         Commune Saarland   10219  1515
 9 Nohfelden           Commune Saarland   10247  1511
10 Friedrichsthal      City    Saarland   10409  1489
11 Marpingen           Commune Saarland   10590  1461
12 Mandelbachtal       Commune Saarland   11107  1390
13 Kleinblittersdorf   Commune Saarland   11396  1354
14 Überherrn           Commune Saarland   11655  1317
15 Mettlach            Commune Saarland   12180  1241
16 Tholey              Commune Saarland   12385  1217
17 Saarwellingen       Commune Saarland   13348  1104
18 Quierschied         Commune Saarland   13506  1088
19 Spiesen-Elversberg  Commune Saarland   13509  1086
20 Rehlingen-Siersburg Commune Saarland   14526   996
21 Riegelsberg         Commune Saarland   14763   982
22 Ottweiler           City    Saarland   14934   969
23 Beckingen           Commune Saarland   15355   931
24 Losheim am See      Commune Saarland   15906   887
25 Schiffweiler        Commune Saarland   15993   882
26 Wadern              City    Saarland   16181   874
27 Schmelz             Commune Saarland   16435   857
28 Sulzbach/Saar       City    Saarland   16591   849
29 Illingen            Commune Saarland   16978   827
30 Schwalbach          Commune Saarland   17320   812
31 Eppelborn           Commune Saarland   17726   793
32 Wadgassen           Commune Saarland   17885   785
33 Bexbach             City    Saarland   18038   777
34 Heusweiler          Commune Saarland   18201   762
35 Püttlingen          City    Saarland   19134   718
36 Lebach              City    Saarland   19484   701
37 Dillingen/Saar      City    Saarland   20253   654
38 Blieskastel         City    Saarland   21255   601
39 St. Wendel          City    Saarland   26220   460
40 Merzig              City    Saarland   29727   392
41 Saarlouis           City    Saarland   34479   323
42 St. Ingbert         City    Saarland   36645   299
43 Völklingen          City    Saarland   38809   279
44 Homburg             City    Saarland   41502   247
45 Neunkirchen         City    Saarland   46172   206
46 Saarbrücken         City    Saarland  175853    43
47 Perl                Commune Saarland      NA    NA</code></pre>
</div>
</div>
<ol start="13" type="1">
<li><p>With reference to the table above, we have identified an entry for the city of Perl that solely consists of <code>NAs</code>. This city is duplicated in the dataset, appearing at positions 1 and 47. The latter duplicate contains only <code>NAs</code> and can be safely removed without the loss of valuable information. Please eliminate this duplification and regenerate the list of all cities in the Saarland.</p></li>
<li><p>Calculate the total population and average size of cities in Saarland.</p></li>
<li><p>Check if any other city is recorded more than once in the dataset. To do so, reproduce the table below.</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 5
# Groups:   city [11]
   city        status                  state               pop2011 unique_count
   &lt;chr&gt;       &lt;chr&gt;                   &lt;chr&gt;                 &lt;dbl&gt;        &lt;int&gt;
 1 Bonn        City with County Rights Nordrhein-Westfalen  305765            3
 2 Bonn        City with County Rights Nordrhein-Westfalen  305765            3
 3 Bonn        City with County Rights Nordrhein-Westfalen  305765            3
 4 Brühl       Commune                 Baden-Württemberg     13805            2
 5 Brühl       City                    Nordrhein-Westfalen   43568            2
 6 Erbach      City                    Baden-Württemberg     13024            2
 7 Erbach      City                    Hessen                13245            2
 8 Fürth       City with County Rights Bayern               115613            2
 9 Fürth       Commune                 Hessen                10481            2
10 Lichtenau   City                    Nordrhein-Westfalen   10473            2
11 Lichtenau   Commune                 Sachsen                7544            2
12 Münster     Commune                 Hessen                14071            2
13 Münster     City with County Rights Nordrhein-Westfalen  289576            2
14 Neunkirchen Commune                 Nordrhein-Westfalen   13930            2
15 Neunkirchen City                    Saarland              46172            2
16 Neuried     Commune                 Baden-Württemberg      9383            2
17 Neuried     Commune                 Bayern                 8277            2
18 Petersberg  Commune                 Hessen                14766            2
19 Petersberg  Commune                 Sachsen-Anhalt        10097            2
20 Senden      City                    Bayern                21560            2
21 Senden      Commune                 Nordrhein-Westfalen   19976            2
22 Staufenberg City                    Hessen                 8114            2
23 Staufenberg Commune                 Niedersachsen          7983            2</code></pre>
</div>
</div>
<ol start="16" type="1">
<li>The table indicates that the city of Bonn appears three times in the dataset, and all three observations contain identical information. Thus, remove two of these observations to ensure that Bonn is uniquely represented in the dataset. All other cities that occur more than once in the data are situated in different states. That means, these are distinct cities that coincidentally share the same name.</li>
</ol>
</section>
<section id="data-analysis-zipfs-law" class="level3 unlisted unnumbered">
<h3 class="unlisted unnumbered anchored" data-anchor-id="data-analysis-zipfs-law">Data analysis (Zipf’s Law)</h3>
<p><em><strong>Note:</strong> If you have failed to solve the data cleaning tasks above, you can download the cleaned data from ILIAS, save it in your working directory and load it from there with:</em> <code>load("city_clean.RData")</code></p>
<p>In the following, you aim to examine the validity of Zipf’s Law for Germany. Zipf’s Law postulates how the size of cities is distributed. The “law” states that there is a special relationship between the size of a city and the rank it occupies in a series sorted by city size. In the estimation equation <span class="math display">\[
\log(M_j) = c - q \log(R_j),
\]</span> the law postulates a coefficient of <span class="math inline">\(( q=1 )\)</span>. <span class="math inline">\(c\)</span> is a constant; <span class="math inline">\(M_j\)</span> is the size of city <span class="math inline">\(j\)</span>; <span class="math inline">\(R_j\)</span> is the rank that city <span class="math inline">\(j\)</span> occupies in a series sorted by city size.</p>
<ol start="17" type="1">
<li></li>
</ol>
<p>Create a variable named <code>rank</code> that includes a ranking of cities based on the population size in the year 2011. Therefore, Berlin should have a rank of 1, Hamburg a rank of 2, Munich a rank of 3, and so on.</p>
<p><strong>Note:</strong> If you cannot solve this task, use the variable <code>rankX</code> as a substitute for the variable* <code>rank</code> that was not generated.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  city                    pop2011  rank
  &lt;chr&gt;                     &lt;dbl&gt; &lt;int&gt;
1 Berlin                  3292365     1
2 Hamburg                 1706696     2
3 München [Munich]        1348335     3
4 Köln [Cologne]          1005775     4
5 Frankfurt am Main        667925     5
6 Düsseldorf [Dusseldorf]  586291     6</code></pre>
</div>
</div>
<ol start="18" type="1">
<li>Calculate the Pearson Correlation Coefficient of the two variables <code>pop2011</code> and <code>rank</code>. The result should be:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2948903</code></pre>
</div>
</div>
<ol start="19" type="1">
<li>Create a scatter plot. On the x-axis, plot the variable <code>rank</code>, and on the y-axis, plot <code>pop2011</code>. Add a regression line representing the observed relationship to the same scatter plot.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-82-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="45_exercises_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="20" type="1">
<li>Logarithmize the variables <code>rank</code> and <code>pop2011</code>. Title the new variables as <code>lnrank</code> and <code>lnpop2011</code>, respectively. Here is a snapshot of the resulting variables:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  city                     rank lnrank pop2011 lnpop2011
  &lt;chr&gt;                   &lt;int&gt;  &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
1 Berlin                      1  0     3292365      15.0
2 Hamburg                     2  0.693 1706696      14.4
3 München [Munich]            3  1.10  1348335      14.1
4 Köln [Cologne]              4  1.39  1005775      13.8
5 Frankfurt am Main           5  1.61   667925      13.4
6 Düsseldorf [Dusseldorf]     6  1.79   586291      13.3</code></pre>
</div>
</div>
<ol start="21" type="1">
<li>Calculate the Pearson Correlation Coefficient of the two variables <code>lnpop2011</code> and <code>lnrank</code>. The result should be:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.9990053</code></pre>
</div>
</div>
<ol start="22" type="1">
<li>Create a scatter plot. On the x-axis, plot the variable <code>lnrank</code>, and on the y-axis, plot <code>lnpop2011</code>. Add a regression line representing the observed relationship to the same scatter plot. Additionally, add a title and label the axes like is shown here:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="45_exercises_files/figure-html/unnamed-chunk-85-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="45_exercises_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol start="23" type="1">
<li>Now, test the relationship postulated in Zipf’s Law. Regress the logarithmized city size in the year 2011 on the logarithmized rank of a city in a series sorted by city size. Briefly interpret the results, addressing the coefficient of determination. Show the regression results. Here is one way to present the results of the regression <em>(Note: The way how you present your regression results do not matter)</em>:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lnpop2011 ~ lnrank, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.28015 -0.01879  0.01083  0.02005  0.25973 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 14.947859   0.005141    2908   &lt;2e-16 ***
lnrank      -0.780259   0.000766   -1019   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.03454 on 2067 degrees of freedom
Multiple R-squared:  0.998, Adjusted R-squared:  0.998 
F-statistic: 1.038e+06 on 1 and 2067 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="24" type="1">
<li>Explain the following lines of code.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prediction =</span> <span class="fu">predict</span>(zipf, <span class="at">newdata =</span> df)) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pred_pop =</span> <span class="fu">exp</span>(prediction))</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(city, pop2011, pred_pop) <span class="sc">|&gt;</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(city <span class="sc">==</span> <span class="st">"Regensburg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  city       pop2011 pred_pop
  &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;
1 Regensburg  135403  134194.</code></pre>
</div>
</div>
<p>Solutions are provided <a href="https://raw.githubusercontent.com/hubchev/courses/main/scr/exe_zipf_solution.R">here</a>.</p>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Figure&nbsp;6.1: The logo of the DatasauRus package</span>
<span class="glightbox-desc lightbox-desc-6">Weight vs.&nbsp;Calories</span>
<span class="glightbox-desc lightbox-desc-7">Ranking history: 1. FC Kaiserslautern</span>
<span class="glightbox-desc lightbox-desc-8">Ranking history: 1. FC Köln</span>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-Hortacsu2015Ongoing" class="csl-entry" role="listitem">
Hortaçsu, A., &amp; Syverson, C. (2015). The ongoing evolution of <span>US</span> retail: A format tug-of-war. <em>Journal of Economic Perspectives</em>, <em>29</em>(4), 89–112.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./40_manage.html" class="pagination-link" aria-label="Manage data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manage data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","selector":".lightbox","openEffect":"zoom","loop":false});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>